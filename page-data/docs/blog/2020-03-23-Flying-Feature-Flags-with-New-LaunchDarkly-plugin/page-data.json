{"componentChunkName":"component---src-templates-blog-post-js","path":"/docs/blog/2020-03-23-Flying-Feature-Flags-with-New-LaunchDarkly-plugin/","result":{"data":{"site":{"siteMetadata":{"title":"Gatsby Starter Blog"}},"markdownRemark":{"id":"5bd7d888-fb9a-5399-ad69-284801790ab0","excerpt":"A few months ago we decided to migrate our public-facing documentation site from a managed documentation service to Gatsby. We wanted greater control of the…","html":"<p>A few months ago we decided to migrate our <a href=\"https://docs.launchdarkly.com\">public-facing documentation site</a> from a managed documentation service to Gatsby. We wanted greater control of the site and a git-based workflow. Additional goals were to scale to a larger set of internal authors and also accept contributions from our community. During the development of this new site, we realized that it might be useful to hide certain sections of the site from certain groups of people; for example, limit access to beta users or a specified group of reviewers.</p>\n<p>Here at <a href=\"https://launchdarkly.com/\">LaunchDarkly</a>, we know a thing or two about using feature flags to control and manage the release of features. First, though, you might be wondering, <a href=\"https://martinfowler.com/articles/feature-toggles.html\">“What <em>are</em> feature flags, anyway?”</a>. In simple terms, a feature flag is a decision point in your code that can change the behavior of your application. LaunchDarkly is a feature management system. It lets you ship code to production without revealing it to your customers, gradually release that code to an expanding group of customers, and easily roll back to an earlier version if you find a bug.</p>\n<p>Our first experiment in using LaunchDarkly with our own new site was to hide navigation items that aren’t quite ready for the world to see—while still allowing a limited set of people to access those hidden pages with the direct URL. When it’s appropriate, we can toggle a flag to show those navigation items to the world instantly.</p>\n<p>Sounds simple enough, right? There are a whole host of use cases where you might want to use feature flags on your Gatsby site:</p>\n<ul>\n<li>Gradually roll out new sections or features of your site</li>\n<li>Release a brand redesign across multiple properties and products by toggling a single flag, rather than coordinating manual, time-sensitive deploys</li>\n<li>Target specific users or user segments with the new feature</li>\n<li><a href=\"https://launchdarkly.com/features/experimentation/\">Experiment with an A/B/n test</a> to find the best-performing variation of a feature</li>\n</ul>\n<p>We did all of the above in on our new Gatsby-based docs site! We had such a positive outcome from combining LaunchDarkly’s feature flag capabilities with Gatsby builds that it occurred to us others might want to do the same thing. So we got to work creating a plugin to make it super simple to use feature flags with Gatsby.</p>\n<p>The <a href=\"/gatsby-bloga-2/packages/gatsby-plugin-launchdarkly/\">LaunchDarkly plugin for Gatsby</a> makes it easy to start using feature flags in any Gatsby site. This plugin is powered by the <a href=\"https://docs.launchdarkly.com/docs/react-sdk-reference\">LaunchDarkly React SDK</a>. This SDK uses <a href=\"https://en.wikipedia.org/wiki/Server-sent_events\">server-sent events</a> to stream feature flag updates to your site in realtime. With it you can control feature availability instantly without your users having to refresh the page.</p>\n<p>Here’s a quick demo of this plugin in action:</p>\n<p><a href=\"https://www.youtube.com/embed/kCidJJf75CA\" title=\"LaunchDarkly feature flag plugin\"><img src=\"https://res.cloudinary.com/marcomontalbano/image/upload/v1583779053/video_to_markdown/images/youtube--kCidJJf75CA-c05b58ac6eb4c4700831b2b3070cd403.jpg\" alt=\"LaunchDarkly feature flag plugin\"></a></p>\n<p>The example in the video shows a simple page from the Gatsby default starter using the LaunchDarkly plugin. Here’s the code:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Link <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"gatsby\"</span>\n\n<span class=\"token keyword\">import</span> Layout <span class=\"token keyword\">from</span> <span class=\"token string\">\"../components/layout\"</span>\n<span class=\"token keyword\">import</span> Image <span class=\"token keyword\">from</span> <span class=\"token string\">\"../components/image\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token constant\">SEO</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../components/seo\"</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useFlags <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"gatsby-plugin-launchdarkly\"</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">IndexPage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> flags <span class=\"token operator\">=</span> <span class=\"token function\">useFlags</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Layout</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">SEO</span></span> <span class=\"token attr-name\">title</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Home<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>flags<span class=\"token punctuation\">.</span>helloWorld <span class=\"token operator\">?</span> <span class=\"token string\">\"Hello World!\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Welcome to your new Gatsby site.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Now go build something great.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> maxWidth<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">300px</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> marginBottom<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">1.45rem</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Image</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">to</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/page-2/<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Go to page 2</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Layout</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> IndexPage</code></pre></div>\n<p>In this example, the <code class=\"language-text\">flags</code> object returned by the <code class=\"language-text\">useFlags()</code> hook is a simple object that contains all of the client-side feature flags available in your LaunchDarkly project. As the values of these flags change, components that rely on them re-render automatically.</p>\n<p>Here, we’re looking for a flag called <code class=\"language-text\">helloWorld</code>. This particular <code class=\"language-text\">helloWorld</code> flag is a boolean flag, but you can create flags that are multivariate strings, integers, or even JSON.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsby-bloga-2/static/b4282d039f9cedcbb3da7fa6b176e77d/e40ed/feature-flags-dashboard.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.83783783783784%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAACDUlEQVQ4y5WSzU4TURTH5y18AGlpxQ9CSIdWlA4aoSZGNGGFC41LXbs2bF34FK4QELowmsbNtNPSjYJIdeUDQDvT+f5o+/ec26GUVkOc5Jd7z5lz/vfcc640I+eQnVcwfysPeS6LqavXkUpPDZhMXcHliSQmEpNnkD3sSyRTSKfSWFt7Aqm+Potv69dQ33qLz+pXlEollMtl1Pb2UKvVBJqmjVBFtVpDpaJBVctQK1Vo1TqOjhqQ3jzP4PVqAgfqLuywh7Zh4H++MAzhR0DQ7dtSWl7CpWQG7zZ2hMOwTDiOA9t2xMq4rku2LWA7CAIEJBSGEaKICQWdTgfS3cIKZnMKNj8UYbZN1H//QtOy4Hk+HNcb4JLtxj5ePT8QCH/s84MQkrK8ghuZBbzfLiKk005a+llgnMirQYfpRvuc+ChCcOHeA0zLfcGISj4+aUKn5GFRxrRstE3rYsH80kNMz+WFYLfXQ5Mq5GpYgJNPhU8F/yU2ELxz/zFmsgo2tnbhUzJX2NINge24YxX2+0h4I7jDgrnFwZXbNMko6oh+8iQ5iKfJ+yDej0GxHMcFSTcXC9TD29gkwf6zsUSiz08jXvmgTkw0gvBRAdwutiWl8AhyfhnbxY/0s4sW9fBYN+l69thg/gb3udsDvh/+QKPxE9Kzl6+w+vQFPn1RRYWW7Z57MhfBgqSH/f0DHJLoH7Owf+B2K1SLAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Feature flags dashboard\"\n        title=\"Feature flags dashboard\"\n        src=\"/gatsby-bloga-2/static/b4282d039f9cedcbb3da7fa6b176e77d/fcda8/feature-flags-dashboard.png\"\n        srcset=\"/gatsby-bloga-2/static/b4282d039f9cedcbb3da7fa6b176e77d/12f09/feature-flags-dashboard.png 148w,\n/gatsby-bloga-2/static/b4282d039f9cedcbb3da7fa6b176e77d/e4a3f/feature-flags-dashboard.png 295w,\n/gatsby-bloga-2/static/b4282d039f9cedcbb3da7fa6b176e77d/fcda8/feature-flags-dashboard.png 590w,\n/gatsby-bloga-2/static/b4282d039f9cedcbb3da7fa6b176e77d/efc66/feature-flags-dashboard.png 885w,\n/gatsby-bloga-2/static/b4282d039f9cedcbb3da7fa6b176e77d/c83ae/feature-flags-dashboard.png 1180w,\n/gatsby-bloga-2/static/b4282d039f9cedcbb3da7fa6b176e77d/e40ed/feature-flags-dashboard.png 1378w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>I’ll leave it to your imagination for how you might use this, but the plugin is very flexible, and the sky’s the limit. You can use it to hide and reveal navigation items like we’re doing. You can use it to test out a new visual design.</p>\n<p>However you use it, we’d love to hear about it. Tweet to <a href=\"https://twitter.com/launchdarkly\">@launchdarkly</a> and <a href=\"https://twitter.com/gatsbyjs\">@gatsbyjs</a> and let us know what you think!</p>\n<p>One last thing: <a href=\"https://github.com/launchdarkly-labs/gatsby-plugin-launchdarkly\">this plugin is open source</a>. We’d love your contributions!</p>","frontmatter":{"title":"Flying Feature Flags with LaunchDarkly’s New Plugin for Gatsby","date":"March 23, 2020","description":null}}},"pageContext":{"slug":"/docs/blog/2020-03-23-Flying-Feature-Flags-with-New-LaunchDarkly-plugin/","previous":{"fields":{"slug":"/docs/blog/2020-03-23-introducing-gatsby-web-creators/"},"frontmatter":{"title":"Introducing Gatsby Web Creators"}},"next":{"fields":{"slug":"/docs/blog/2020-03-11-netlify-functions-and-gatsby-cloud/"},"frontmatter":{"title":"Using Netlify Functions with Gatsby Cloud"}}}}}