{"componentChunkName":"component---src-templates-blog-post-js","path":"/docs/blog/2019-04-30-how-to-build-a-blog-with-wordpress-and-gatsby-part-2/","result":{"data":{"site":{"siteMetadata":{"title":"Gatsby Starter Blog"}},"markdownRemark":{"id":"878573ca-f992-5707-8ce1-0ad0e3783fec","excerpt":"Note: This is part two in a series of posts about Gatsby.js and WordPress. You can find Part One Here, and Part Three Here. In the last post, I covered setting…","html":"<blockquote>\n<p>Note: This is part two in a series of posts about Gatsby.js and WordPress. You can find <a href=\"/gatsby-bloga-2/blog/2019-04-26-how-to-build-a-blog-with-wordpress-and-gatsby-part-1\">Part One Here</a>, and <a href=\"/gatsby-bloga-2/blog/2019-05-02-how-to-build-a-blog-with-wordpress-and-gatsby-part-3\">Part Three Here</a>.</p>\n</blockquote>\n<p>In the last post, I covered setting up <a href=\"/gatsby-bloga-2/blog/2019-04-26-how-to-build-a-blog-with-wordpress-and-gatsby-part-1\">WordPress for use with Gatsby</a>. Today I will cover how to pull the data from WordPress into Gatsby and build pages.</p>\n<p>I have set up a WordPress site for you to use with the plugins mentioned in the last post as well as some dummy content to use. If you’re curious, my favorite lorem generator is <a href=\"http://fillerama.io/\">Fillerama</a> which offers random content from Futurama, Monty Python, Star Wars, and more. This is where the content came from.</p>\n<p><a href=\"https://giphy.com/gifs/movie-funny-HfJdu4HABDU3e\">https://giphy.com/gifs/movie-funny-HfJdu4HABDU3e</a></p>\n<h2>Gatsby.js starter</h2>\n<p>One of the nice things about Gatsby is the starter projects. These are available for most applications and setups including WordPress, although you won’t be using that today. You will just be using the starter default so you can configure everything yourself.</p>\n<p>In the future, it may be beneficial to take a look at the various starters and see if there’s one that meets your needs. This can be a huge time saver and gives you the ability to get straight into the development portion without having to worry about configuration.</p>\n<h3>Gatsby default starter</h3>\n<p>Before I get into the code, I want to talk about the <a href=\"https://github.com/gatsbyjs/gatsby-starter-default\">Gatsby starter default</a>. This project is the default (obviously) project that will be built when you create a new gatsby project with the Command Line Interface, or CLI. It comes with a few plugins, but not too much so it’s wide open for customization.</p>\n<p>Before you dig into the project files, you need to create your project. First you need to install the gatsby-cli tool with the code below:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> -g gatsby-cli</code></pre></div>\n<p>Once that finishes installing, you can actually create your project. Navigate into the directory you want your project folder to live in and run the following command:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">gatsby new gatsby-wordpress</code></pre></div>\n<p>Now that you have your project created, let’s take a look inside. You will see a <code class=\"language-text\">src</code> folder along with several files. Here’s a little breakdown of what these do:</p>\n<ul>\n<li><strong>src/</strong>: Directory that holds your React.js project</li>\n<li><strong>.gitignore</strong>: Tells what shouldn’t be captured in git commits</li>\n<li><strong>.prettierrc</strong>: Determines styles in code editor (tabs, quotes, etc)</li>\n<li><strong>LICENSE</strong>: Basic MIT license</li>\n<li><strong>README.md</strong>: Markdown file with instructions for use</li>\n<li><strong>gatsby-browser.js</strong>: Gatsby Browser API stuff goes here. Global style calls go here too</li>\n<li><strong>gatsby-config.js</strong>: Configuration for your project including meta data and plugins</li>\n<li><strong>gatsby-node.js</strong>: Where you tell Gatsby to build pages from a template using provided data</li>\n<li><strong>gatsby-ssr.js</strong>: Gatsby Server Side Rendering APIs go here</li>\n<li><strong>package.json</strong>: File which holds custom scripts, dependency information, etc</li>\n</ul>\n<p>These files will be present in all Gatsby starters you use, so it’s worth your time to have at least a basic level of understanding with each one. Let’s take a look and see what dependencies and plugins you have by default. Open up the <code class=\"language-text\">package.json</code> file and scroll down to dependencies. This will tell you what packages you already have. Mine looks like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"json:title=package.json\"><pre class=\"language-json:title=package.json\"><code class=\"language-json:title=package.json\">{\n  &quot;name&quot;: &quot;gatsby-starter-default&quot;,\n  &quot;private&quot;: true,\n  &quot;description&quot;: &quot;A simple starter to get up and developing quickly with Gatsby&quot;,\n  &quot;version&quot;: &quot;0.1.0&quot;,\n  &quot;author&quot;: &quot;Kyle Mathews &lt;mathews.kyle@gmail.com&gt;&quot;,\n  &quot;dependencies&quot;: {\n    &quot;gatsby&quot;: &quot;^2.3.3&quot;,\n    &quot;gatsby-image&quot;: &quot;^2.0.35&quot;,\n    &quot;gatsby-plugin-manifest&quot;: &quot;^2.0.25&quot;,\n    &quot;gatsby-plugin-offline&quot;: &quot;^2.0.25&quot;,\n    &quot;gatsby-plugin-react-helmet&quot;: &quot;^3.0.11&quot;,\n    &quot;gatsby-plugin-sass&quot;: &quot;^2.0.11&quot;,\n    &quot;gatsby-plugin-sharp&quot;: &quot;^2.0.32&quot;,\n    &quot;gatsby-source-filesystem&quot;: &quot;^2.0.28&quot;,\n    &quot;gatsby-transformer-sharp&quot;: &quot;^2.1.17&quot;,\n    &quot;node-sass&quot;: &quot;^4.11.0&quot;,\n    &quot;path&quot;: &quot;^0.12.7&quot;,\n    &quot;prop-types&quot;: &quot;^15.7.2&quot;,\n    &quot;react&quot;: &quot;^16.8.6&quot;,\n    &quot;react-dom&quot;: &quot;^16.8.6&quot;,\n    &quot;react-helmet&quot;: &quot;^5.2.0&quot;\n  },\n  &quot;devDependencies&quot;: {\n    &quot;prettier&quot;: &quot;2.0.4&quot;\n  },\n  &quot;keywords&quot;: [&quot;gatsby&quot;],\n  &quot;license&quot;: &quot;MIT&quot;,\n  &quot;scripts&quot;: {\n    &quot;build&quot;: &quot;gatsby build&quot;,\n    &quot;develop&quot;: &quot;gatsby develop&quot;,\n    &quot;format&quot;: &quot;prettier --write src/**/*.{js,jsx}&quot;,\n    &quot;start&quot;: &quot;npm run develop&quot;,\n    &quot;serve&quot;: &quot;gatsby serve&quot;,\n    &quot;test&quot;: &quot;echo \\&quot;Write tests! -&gt; https://gatsby.dev/unit-testing \\&quot;&quot;\n  },\n  &quot;repository&quot;: {\n    &quot;type&quot;: &quot;git&quot;,\n    &quot;url&quot;: &quot;https://github.com/gatsbyjs/gatsby-starter-default&quot;\n  },\n  &quot;bugs&quot;: {\n    &quot;url&quot;: &quot;https://github.com/gatsbyjs/gatsby/issues&quot;\n  }\n}</code></pre></div>\n<p>You can see there are several dependencies installed right off the bat. I’ll just cover a few of them. gatsby-image creates an effect similar to Medium and also allows you to use responsive images and optimize your site. gatsby-transformer-sharp is what creates the responsive and optimized images, then allows you to query for those through GraphQL. You also have gatsby-source-filesystem which could be used to pull in markdown files for content, but you’re using WordPress instead. The last package I want to mention is gatsby-plugin-react-helmet, which allows you to create meta tags for the site’s head which helps with Search Engine Optimization, or SEO.</p>\n<p>Whew! That was a mouthful.</p>\n<p><a href=\"https://giphy.com/gifs/movie-funny-HfJdu4HABDU3e\">https://giphy.com/gifs/movie-funny-HfJdu4HABDU3e</a></p>\n<h3>Running the site</h3>\n<p>You will be running your Gatsby.js site in development so you can see what you’re doing. Kinda hard to fly a plane when you can’t see where you’re going, right?</p>\n<p>To do this, run the following command in the terminal and it will build the site in a development environment with hot reloading and more.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">gatsby develop</code></pre></div>\n<p>After running that command, you can visit <code class=\"language-text\">http://localhost:8000</code> in the browser and you should see the site pictured below:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsby-bloga-2/static/a9344d044f72e6cde99818214ba45947/07a9c/gatsby1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.08108108108109%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAABJUlEQVQoz51QyUoDQRSczxG9e/ALxFz8AZejh5xdwK9wOwjiwYXcRFEQBEMQdMhBDATEBcUYTaKEBKanx+npfmV3h0nGg8ZJQdFNdb2iXjszw2uYHVnH1NAqsmNbWJ7MYSmzj4WJXcyP72Axs4e50U1M63fjM/6/6Fwd38Hy5B4XR2UUDkvIH9zg+vxJ89mexdMHXMa+PnSQQCg5qrUK3uoVSBIYBI6UCoZKEkQo4DNuybgPRUbvvP+XtiER2XSltKipb3gp1tG4bVudFHU9fRt2JnqhrNZEafsM7oaL1isfLNCY44GgxeCu5NEov6cO6zVMrC0F4bHwARGoH3rqhgaRkGh/MnhNX/8CdZunbhgPCBHB8xg4DxB+Rama/bpyEmnDDL4BZJo0duVnt9cAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Initial appearance of Gatsby.js starter\"\n        title=\"Initial appearance of Gatsby.js starter\"\n        src=\"/gatsby-bloga-2/static/a9344d044f72e6cde99818214ba45947/fcda8/gatsby1.png\"\n        srcset=\"/gatsby-bloga-2/static/a9344d044f72e6cde99818214ba45947/12f09/gatsby1.png 148w,\n/gatsby-bloga-2/static/a9344d044f72e6cde99818214ba45947/e4a3f/gatsby1.png 295w,\n/gatsby-bloga-2/static/a9344d044f72e6cde99818214ba45947/fcda8/gatsby1.png 590w,\n/gatsby-bloga-2/static/a9344d044f72e6cde99818214ba45947/efc66/gatsby1.png 885w,\n/gatsby-bloga-2/static/a9344d044f72e6cde99818214ba45947/c83ae/gatsby1.png 1180w,\n/gatsby-bloga-2/static/a9344d044f72e6cde99818214ba45947/07a9c/gatsby1.png 1440w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>The site provides a navbar with a link going back to the homepage. There is also a bit of content with a link to page 2 which then provides a link back to page 1. It’s a very simple site, but already you can see how fast Gatsby.js is.</p>\n<h2>Adding Gatsby.js plugins</h2>\n<p>Now that you know what’s already installed and what it looks like to start, you can add the stuff you need to use WordPress with your site. Fortunately, Gatsby has a page on their site where you can <a href=\"/gatsby-bloga-2/plugins/\">see what plugins are available</a>. You will be adding the following plugins to your site: <a href=\"/gatsby-bloga-2/packages/gatsby-source-wordpress/\">Gatsby-Source-WordPress</a> and <a href=\"/gatsby-bloga-2/packages/gatsby-plugin-sitemap/\">Gatsby-Plugin-Sitemap</a>.</p>\n<p>To do this, you can use this code in the terminal:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> gatsby-source-wordpress gatsby-plugin-sitemap</code></pre></div>\n<p>Looking at your <code class=\"language-text\">package.json</code> file will reveal that each of these packages have been added to the project, but this isn’t enough to start using the gatsby-plugin files. You first need to add them to the <code class=\"language-text\">gatsby-config.js</code> file. Luckily, the docs for these plugins are awesome and do a good job explaining all of this. I’d recommend you take a look at them to find out what each of the settings does, but I’ll provide the code for the <code class=\"language-text\">gatsby-config.js</code> file after adding all of these plugins to your site:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript:title=gatsby-config.js\"><pre class=\"language-javascript:title=gatsby-config.js\"><code class=\"language-javascript:title=gatsby-config.js\">module.exports = {\n  siteMetadata: {\n    title: `Gatsby Default Starter`,\n    description: `Kick off your next, great Gatsby project with this default starter. This barebones starter ships with the main Gatsby configuration files you might need.`,\n    author: `@gatsbyjs`,\n  },\n  plugins: [\n    `gatsby-plugin-react-helmet`,\n    {\n      resolve: `gatsby-source-filesystem`,\n      options: {\n        name: `images`,\n        path: `${__dirname}/src/images`,\n      },\n    },\n    `gatsby-transformer-sharp`,\n    `gatsby-plugin-sharp`,\n    {\n      resolve: `gatsby-plugin-manifest`,\n      options: {\n        name: `gatsby-starter-default`,\n        short_name: `starter`,\n        start_url: `/`,\n        background_color: `#663399`,\n        theme_color: `#663399`,\n        display: `minimal-ui`,\n        icon: `src/images/gatsby-icon.png`, // This path is relative to the root of the site.\n      },\n    },\n    {\n      resolve: &quot;gatsby-source-wordpress&quot;,\n      options: {\n        // I have created a dummy site for us to use with the plugins we discussed\n        baseUrl: &quot;using-wordpress-with-gatsby.iamtimsmith.com&quot;,\n        protocol: &quot;https&quot;,\n        hostingWPCOM: false,\n        // We will be using some advanced custom fields\n        useACF: true,\n        acfOptionPageIds: [],\n        verboseOutput: false,\n        perPage: 100,\n        searchAndReplaceContentUrls: {\n          sourceUrl: &quot;https://www.using-wordpress-with-gatsby.iamtimsmith.com&quot;,\n          replacementUrl: &quot;https://localhost:8000&quot;,\n        },\n        // Set how many simultaneous requests are sent at once.\n        concurrentRequests: 10,\n        includedRoutes: [\n          &quot;**/categories&quot;,\n          &quot;**/posts&quot;,\n          &quot;**/pages&quot;,\n          &quot;**/media&quot;,\n          &quot;**/tags&quot;,\n          &quot;**/taxonomies&quot;,\n          &quot;**/users&quot;,\n        ],\n        excludedRoutes: [],\n        normalizer: function ({ entities }) {\n          return entities\n        },\n      },\n    },\n    `gatsby-plugin-sass`,\n    `gatsby-plugin-sitemap`,\n    // this (optional) plugin enables Progressive Web App + Offline functionality\n    // To learn more, visit: https://gatsby.dev/offline\n    // &#39;gatsby-plugin-offline&#39;,\n  ],\n}</code></pre></div>\n<h3>Making sure plugins are working</h3>\n<p>If the Gatsby site is currently running, you need to stop it and restart it so it pulls in the new content from WordPress. It’s important to know that while you can choose what information goes on what pages after your app is built, it will only pull content when it is initially run so changes in the source require a rebuild.</p>\n<p>Once you’ve restarted your server, you can visit <code class=\"language-text\">http://localhost:8000/___graphql</code> to use the “graphical” playground. Here, you can use GraphQL to query your data for testing purposes. You should create opening and closing curly braces and then you can use shift+space (or ctrl+space on windows) to get suggestions. Once you have the data you want, you will be able to paste the query into your components, pages, and templates so you can use the information available. Here’s what my query looks like for now:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsby-bloga-2/static/a173b46a2a19dba023ddee5f5a2dca21/07a9c/gatsby2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.08108108108109%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAABa0lEQVQoz4WSi1KDMBBF+f+fc8aq1WodW94tISEvsBSumxQQKTMyc2cDZM/e7CaI4hh5fkLBGBhJCAEp5V9VEiw5gcW075ihOGRgUQ52HCLJfc/CHIE2Fhk3+G6vWD593/vYdR34LkX5GEK+JqieY4iXmbaJl0o5gqapUVQWXDeU2E+QJVBxCc4kDlkJLjVs3cDY2kc7RlJgjIFLi84VpGkm0Kg50AiNQ1gg/MygaL/mCrocRMU0/Q+stT6x6653ziZg30ErA03OjDaodQ2jLK0XovYFSinvwOXOXf112ENT4Ypgmo7njmqGI45HH0U9bO4Adw6poC4l0qTEKS1hcroJtFYU3SC83Du1IbhcLqt9WwLFPoeg6XKasp+sW28iH73eUlS0ZxW4NhSxz26J2wEwvzIO/hSh+jojaNsW/z0OLN7Tm6MBMMXR3S6DjNjt2rhJu146uHO8JvFBwIfjrzOCOFd8E04FZMjwA1ulThn4gnPoAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"GraphQL query tests\"\n        title=\"GraphQL query tests\"\n        src=\"/gatsby-bloga-2/static/a173b46a2a19dba023ddee5f5a2dca21/fcda8/gatsby2.png\"\n        srcset=\"/gatsby-bloga-2/static/a173b46a2a19dba023ddee5f5a2dca21/12f09/gatsby2.png 148w,\n/gatsby-bloga-2/static/a173b46a2a19dba023ddee5f5a2dca21/e4a3f/gatsby2.png 295w,\n/gatsby-bloga-2/static/a173b46a2a19dba023ddee5f5a2dca21/fcda8/gatsby2.png 590w,\n/gatsby-bloga-2/static/a173b46a2a19dba023ddee5f5a2dca21/efc66/gatsby2.png 885w,\n/gatsby-bloga-2/static/a173b46a2a19dba023ddee5f5a2dca21/c83ae/gatsby2.png 1180w,\n/gatsby-bloga-2/static/a173b46a2a19dba023ddee5f5a2dca21/07a9c/gatsby2.png 1440w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>You may notice that there are several drilldowns inside of the <code class=\"language-text\">acf</code> field. This is saying “hey, look for the ACF field called feat_img and get the local, optimized versions of these images so you can use them”. Gatsby also provides fragments which means inside of your application you could just put <code class=\"language-text\">...GatsbyImageSharpSizes</code> instead of drilling down so far and Gatsby will know what to do with it.</p>\n<p>Since you are seeing stuff on the right-hand side, it means that you are getting your data from WordPress, which is awesome! Now you need to tell Gatsby what to do with the data, so let’s talk about the <code class=\"language-text\">gatsby-node.js</code> file a bit.</p>\n<h2>Creating pages in gatsby-node.js</h2>\n<p>As I briefly mentioned earlier, the <code class=\"language-text\">gatsby-node.js</code> file is there so you can build pages programmatically from data. There are two pieces to make this work: the logic in <code class=\"language-text\">gatsby-node.js</code> and a template file to render the data. Let’s start by creating a simple template with no dynamic data just to make sure your logic is working properly.</p>\n<h3>Creating templates in Gatsby.js</h3>\n<p>If you look inside the <code class=\"language-text\">src/</code> folder, you can see directories for components, images, and pages. You need to add one that will house your templates and then add a template for your blog posts. The following code will do this for you:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">mkdir</span> ./src/templates <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">touch</span> ./src/templates/BlogPost.js</code></pre></div>\n<p>Unless there is some special functionality needed for blog posts, you can just <a href=\"https://www.iamtimsmith.com/blog/class-components-vs-stateless-functional-components/\">use a stateless functional component</a>. I won’t go over components in this post, but if you need a refresher, you can <a href=\"https://www.iamtimsmith.com/blog/how-to-create-a-component/\">read up on components here</a>.</p>\n<p>Below is the code I’m using for the template starter. This is just to make sure things are working after you finish setting up your <code class=\"language-text\">gatsby-node.js</code> logic. Once you know the page is being created, you will update the template to display correctly.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx:title=src/templates/blogpost.js\"><pre class=\"language-jsx:title=src/templates/blogpost.js\"><code class=\"language-jsx:title=src/templates/blogpost.js\">import React from &quot;react&quot;\nimport Layout from &quot;../components/layout&quot;\n\nconst BlogPostTemplate = () =&gt; (\n  &lt;Layout&gt;\n    &lt;h1&gt;Blog Post Template&lt;/h1&gt;\n  &lt;/Layout&gt;\n)\n\nexport default BlogPostTemplate</code></pre></div>\n<h3>What is gatsby-node.js doing?</h3>\n<p>Now let’s talk about <code class=\"language-text\">gatsby-node.js</code> a bit more. Let’s start off by discussing why you should use it. You have the ability to create pages and query information for a single blog post, which is very useful… sometimes. Imagine your blog had 100 blog posts and you have to develop a Gatsby site to display all of them. Do you really want to go in and create a separate page for every single one of them? That would be a lot of copying and pasting, not to mention a huge waste of time.</p>\n<p>The gatsby-node.js file allows you to pull in a template file, then query your data using GraphQL. Then you can loop through the appropriate data and programmatically create a page for each piece of data, in this case blog posts and pages. This template will be universal so all content of that type will look the same. You can also use different templates for different content types so your pages and blog posts don’t have to look the same.</p>\n<p><a href=\"https://giphy.com/gifs/excited-the-office-yes-t3Mzdx0SA3Eis\">https://giphy.com/gifs/excited-the-office-yes-t3Mzdx0SA3Eis</a></p>\n<p>The code below pulls in the data for blog posts from WordPress and creates a page for each one using the createPage API provided by Gatsby. It is also much easier to pull in templates in this file using the path package, so I installed it using <code class=\"language-text\">npm install path</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript:title=gatsby-node.js\"><pre class=\"language-javascript:title=gatsby-node.js\"><code class=\"language-javascript:title=gatsby-node.js\">/**\n * Implement Gatsby&#39;s Node APIs in this file.\n *\n * See: https://www.gatsbyjs.org/docs/node-apis/\n */\n\n// You can delete this file if you&#39;re not using it\nconst path = require(`path`)\n\nexports.createPages = async ({ graphql, actions, reporter }) =&gt; {\n  const { createPage } = actions\n  const BlogPostTemplate = path.resolve(&quot;./src/templates/BlogPost.js&quot;)\n\n  const result = await graphql(`\n    {\n      allWordpressPost {\n        edges {\n          node {\n            slug\n            wordpress_id\n          }\n        }\n      }\n    }\n  `)\n\n  if (result.errors) {\n    reporter.panicOnBuild(`Error while running GraphQL query.`)\n    return\n  }\n\n  const BlogPosts = result.data.allWordpressPost.edges\n  BlogPosts.forEach(post =&gt; {\n    createPage({\n      path: `/post/${post.node.slug}`,\n      component: BlogPostTemplate,\n      context: {\n        id: post.node.wordpress_id,\n      },\n    })\n  })\n}</code></pre></div>\n<p>Just like before, you will need to restart your development server to see these changes take place. Go ahead and do that so you can make sure your logic is working correctly. The easiest way I’ve found (in development) to see a list of pages is to go to a route that doesn’t exist, such as <code class=\"language-text\">http://localhost:8000/stuff</code>.</p>\n<p>You can now see all of the pages available and clicking on one should take you to the blog post template you created earlier that just shows Hello World. If this is what you’re seeing, congrats! You’re ready to move to the next section.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsby-bloga-2/static/842b955244aa115ed3a48ba0863a367b/07a9c/gatsby3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.08108108108109%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAAAq0lEQVQoz82P3QrCMAxG9/6vaKFeTVC7rftr1zb5zDYUyy7cQNAPDk1KOU0KrTWUUtAnBdf1YACcEjgKiZCkfoeINv0cZl7OoiwvqIxBVdew1qKxDYbGYrgZTMMI51yG9z7rY4y58G7D62L9nUBSM9YHe/KULcLzNcB0Cd0oOELvCSHxKt1JPmEbUfUJtdCK1AeCE8ZJJiXeTPApxZF1dgmPrPMbIb6c/xc+AJ0wZtb0EFSzAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"See a list of pages on the development 404 page\"\n        title=\"See a list of pages on the development 404 page\"\n        src=\"/gatsby-bloga-2/static/842b955244aa115ed3a48ba0863a367b/fcda8/gatsby3.png\"\n        srcset=\"/gatsby-bloga-2/static/842b955244aa115ed3a48ba0863a367b/12f09/gatsby3.png 148w,\n/gatsby-bloga-2/static/842b955244aa115ed3a48ba0863a367b/e4a3f/gatsby3.png 295w,\n/gatsby-bloga-2/static/842b955244aa115ed3a48ba0863a367b/fcda8/gatsby3.png 590w,\n/gatsby-bloga-2/static/842b955244aa115ed3a48ba0863a367b/efc66/gatsby3.png 885w,\n/gatsby-bloga-2/static/842b955244aa115ed3a48ba0863a367b/c83ae/gatsby3.png 1180w,\n/gatsby-bloga-2/static/842b955244aa115ed3a48ba0863a367b/07a9c/gatsby3.png 1440w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>Updating our blog post template</h2>\n<p>Now that you have pages being created at the desired locations, you should update your blog post template to display the appropriate data. Although you need to make some changes, you will keep it as a stateless functional component. The code below will create your template. I would like to point out that you are using GraphQL to query the information which is then used as a prop called data.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx:title=src/templates/blogposttemplate.js\"><pre class=\"language-jsx:title=src/templates/blogposttemplate.js\"><code class=\"language-jsx:title=src/templates/blogposttemplate.js\">import React from &quot;react&quot;\nimport { graphql } from &quot;gatsby&quot;\nimport Img from &quot;gatsby-image&quot;\nimport Layout from &quot;../components/layout&quot;\nimport SEO from &quot;../components/seo&quot;\n\nconst BlogPostTemplate = ({ data }) =&gt; (\n  &lt;Layout&gt;\n    &lt;SEO\n      title={data.wordpressPost.title}\n      description={data.wordpressPost.excerpt}\n    /&gt;\n    &lt;h1&gt;{data.wordpressPost.title}&lt;/h1&gt;\n    &lt;p&gt;\n      Written by {data.wordpressPost.author.name} on {data.wordpressPost.date}\n    &lt;/p&gt;\n    &lt;Img\n      sizes={data.wordpressPost.acf.feat_img.localFile.childImageSharp.sizes}\n      alt={data.wordpressPost.title}\n      style={{ maxHeight: 450 }}\n    /&gt;\n    &lt;div\n      style={{ marginTop: 20 }}\n      dangerouslySetInnerHTML={{ __html: data.wordpressPost.content }}\n    /&gt;\n  &lt;/Layout&gt;\n)\nexport default BlogPostTemplate\n\nexport const query = graphql`\n  query($id: Int!) {\n    wordpressPost(wordpress_id: { eq: $id }) {\n      title\n      content\n      excerpt\n      date(formatString: &quot;MMMM DD, YYYY&quot;)\n      author {\n        name\n      }\n      acf {\n        feat_img {\n          localFile {\n            childImageSharp {\n              sizes(maxWidth: 1200) {\n                ...GatsbyImageSharpSizes\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n`</code></pre></div>\n<p>You may notice that there are a few components inside of your template that you didn’t create. These come along with the Gatsby starter default and can be modified as needed.</p>\n<p>The Layout component allows you to set a standard layout including header, footer, sidebar, etc on every page. Then you can just wrap your page inside that layout component without having to worry about importing everything inside of every template or page.</p>\n<p>The SEO component allows you to pass in dynamic data such as title, description, and keywords and the component will add those things to the head to improve your site’s SEO score. I typically modify this component a bit so I can also pass in an image and I add a few properties to the meta, which allows Twitter, Facebook, and other sites to display a card like you would expect with an image and everything.</p>\n<p>Here’s what your completed Blog Post looks like after you update the template:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsby-bloga-2/static/793c2d55206d5e610dfc2f7c49b0e5b9/07a9c/gatsby4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.08108108108109%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAACMUlEQVQoz32R20tUQRzH97/oqfco6jl6DnroYoKYVoumuYjRu10eIgg0CCy1eijBLtvazco1Sdc9u6uoVKSuEaxLF3QvXtYNUXbPZeZ8mnNcZAlr4MP3/Gbm92Fmjqdubxf1+7rx7unkwqGHXK0I0HrUz6VjfjevnAjQcvCB2nOXxgP3adh/bxun9288k8EELoPzjL37RvjNDFr/LLGBr0Texgn3zxB+HWfo6SeCj6cY8n/mvfp2GB9IMBGcZ9uh8FA2pCyQX1ngdy7Fej7D5voShY1VLD2PVcxhFNbQC7kSa+w0PEJILEuCLUnkJb0JybOkjT8pCXy3ef7Tpu8X9C0ofqBqhcoXKp8kBMn8Vq/jcFzuCYW0XXsoJTk5LDijCWo1J01qozanB5LUvRzDGzPVnMXZiIk3YnFqVKBlpNsr7C2Hp7yIZJQkbOIbEzQ5RA2a49D66AaX245zcRp8MUnzuKRFUR8VxLL2v4XhtKA6ZHAualIfMWicgpruXl717FI/aDcNgShNE9Cg1htjgppR6/8ndIRVI4aSqStpKieh+lYXvu52zl9vwtt+Dd9HqHPWnCuHTLT0TsLSGw4tCA4Hi+oddSqGDYVJpQaVUYV6r6qQWhsRat2gUnFkUOeD6il3uEJZss/mLNq+FOmI63TMGS53FJ3xokqT23FLoeZndXfPzWmdubUtoSw/oV0qCpsbLKcXWc2myS1nWMmkWMmm3Fx1c3G7djK3lEFYJuWOPxL95i73p+E4AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Completed Blog Post Page\"\n        title=\"Completed Blog Post Page\"\n        src=\"/gatsby-bloga-2/static/793c2d55206d5e610dfc2f7c49b0e5b9/fcda8/gatsby4.png\"\n        srcset=\"/gatsby-bloga-2/static/793c2d55206d5e610dfc2f7c49b0e5b9/12f09/gatsby4.png 148w,\n/gatsby-bloga-2/static/793c2d55206d5e610dfc2f7c49b0e5b9/e4a3f/gatsby4.png 295w,\n/gatsby-bloga-2/static/793c2d55206d5e610dfc2f7c49b0e5b9/fcda8/gatsby4.png 590w,\n/gatsby-bloga-2/static/793c2d55206d5e610dfc2f7c49b0e5b9/efc66/gatsby4.png 885w,\n/gatsby-bloga-2/static/793c2d55206d5e610dfc2f7c49b0e5b9/c83ae/gatsby4.png 1180w,\n/gatsby-bloga-2/static/793c2d55206d5e610dfc2f7c49b0e5b9/07a9c/gatsby4.png 1440w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>Wrapping up blog posts</h2>\n<p>You’re about half-way done with the actual Gatsby.js build. In this post I covered how to import blog posts from WordPress into your Gatsby application and create pages automatically for each post. Honestly, this is the hardest part about making sites in Gatsby. If you’re still keeping up, great job! If you’re struggling, don’t be too hard on yourself. This stuff is hard. If you need to, you can reach out to me on Twitter <a href=\"https://www.twitter.com/iam_timsmith\">@iam_timsmith</a> and I’ll be happy to help you.</p>\n<p><a href=\"https://giphy.com/gifs/great-dicaprio-leonardo-rY93u9tQbybks\">https://giphy.com/gifs/great-dicaprio-leonardo-rY93u9tQbybks</a></p>\n<p>The <a href=\"https://github.com/iamtimsmith/building-a-blog-with-wordpress-and-gatsby\">code for this tutorial</a> can be found on GitHub.</p>\n<p>See you in <a href=\"/gatsby-bloga-2/blog/2019-05-02-how-to-build-a-blog-with-wordpress-and-gatsby-part-3\">How To Build A Blog with WordPress and Gatsby.js - Part 3</a>!</p>","frontmatter":{"title":"How To Build A Blog with WordPress and Gatsby.js - Part 2","date":"April 30, 2019","description":null}}},"pageContext":{"slug":"/docs/blog/2019-04-30-how-to-build-a-blog-with-wordpress-and-gatsby-part-2/","previous":{"fields":{"slug":"/docs/blog/2019-04-29-component-shadowing/"},"frontmatter":{"title":"What is Component Shadowing?"}},"next":{"fields":{"slug":"/docs/blog/2019-05-02-how-to-build-a-blog-with-wordpress-and-gatsby-part-3/"},"frontmatter":{"title":"How To Build A Blog with WordPress and Gatsby.js - Part 3"}}}}}