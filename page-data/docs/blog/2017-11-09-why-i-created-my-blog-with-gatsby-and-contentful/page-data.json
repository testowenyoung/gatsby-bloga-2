{"componentChunkName":"component---src-templates-blog-post-js","path":"/docs/blog/2017-11-09-why-i-created-my-blog-with-gatsby-and-contentful/","result":{"data":{"site":{"siteMetadata":{"title":"Gatsby Starter Blog"}},"markdownRemark":{"id":"7cb07782-1a85-52ab-a82c-5db88607b266","excerpt":"I recently deployed my new blog at\nhalfelectronic.com and I thought it would be\nfitting to talk about how I built it in the first place ‚Äî you know, me being a‚Ä¶","html":"<p>I recently deployed my new blog at\n<a href=\"https://www.halfelectronic.com\">halfelectronic.com</a> and I thought it would be\nfitting to talk about how I built it in the first place ‚Äî you know, me being a\nweb developer and all.</p>\n<p>There is certainly no shortage of options when it comes to platforms and CMSs to\nbuild a blog these days: From the more traditional, cumbersome and usually\ntroublesome PHP based ones ‚Äî I‚Äôm looking at you WordPress ‚Äî to the more\nminimal and modern ones like Ghost, Medium and Tumblr.</p>\n<p>However, in my experience, I found that pretty much all of these options\ntypically force you to give up at least one of the following:</p>\n<ul>\n<li>Money: As in the money you spend per month keeping the blog up and running.</li>\n<li>Time: As in the time you spend maintaining, scaling and securing the blog\ninfrastructure once it has been deployed (i.e. DevOps time).</li>\n<li>Control: As in the degree of control you have over the blog‚Äôs appearance,\nperformance and architecture.</li>\n</ul>\n<p>This last point refers more than anything to online publishing platforms like\nMedium and WordPress.com ‚Äî not to be confused with the self-hosted WordPress\nalternative, which we‚Äôll discuss in a moment. And while that lack of control\nmight not represent a problem to many bloggers, I often find it too limiting for\nmy taste. I like to have my own domain, my own URL structures, my own color\nscheme and my own silly sidebar widgets which display what song I‚Äôm listening at\nthe moment ‚Äî yeah, that‚Äôs a thing I implemented üòÅ.</p>\n<p>By the same token, the idea of not having to worry about keeping your blog up\nand running 24/7 is certainly an appealing one. When you publish an article on\nMedium.com you know that no matter how many people read it, it is very unlikely\nthat Medium will crash and people won‚Äôt be able to access it ‚Äî and if it\nhappens, it‚Äôs not really your problem anymore!</p>\n<p>It will be your problem, however, if you decide to create your own custom blog\nusing a typical self-hosted Content Management System, and you will most likely\nhave to solve that problem by either throwing money or time at it.</p>\n<p>Let‚Äôs take a WordPress self-hosted installation, for example, simply because\nit‚Äôs the most common type of CMS out there and it‚Äôs the one I have the most\nexperience with.</p>\n<p>First of all, you are going to need to host your blog on a server\nrunning PHP and MySQL. No biggie right? After all, there are thousands and\nthousands of hosting companies out there who make a living out of provisioning\nshared hosting environments with PHP and MySQL every day. Evidently, those\nhosting companies are out there to make a buck or two, so they will charge you\nan amount to host your new blog on their servers, which only seems fair.</p>\n<p>If you are a little bit more tech savvy and have experience provisioning\nsoftware in a Linux distribution, you might prefer to rent a droplet from\nDigital Ocean and host the blog yourself. This, in turn, will allow you to have\ngreater control over your site. However, you will also to pay for that droplet,\neven if it‚Äôs the cheaper $5/month one.</p>\n<p>Whatever path you take, let‚Äôs say that you now have your new WordPress blog up\nand running. Now what?</p>\n<p>Well, you‚Äôre most likely gonna want to spend some time securing that site\nagainst hackers. Why? Because hackers love WordPress sites. Don‚Äôt believe me?\nOk, just Google the words ‚ÄúWordPress hacked‚Äù and be prepared to read some really\nnasty horror stories. As someone who spent three years working as a WordPress\ndeveloper I could tell you some of those myself, but let‚Äôs leave that for\nanother day.</p>\n<p>Now, I am not saying that the WordPress Core is an insecure piece of software ‚Äî\nbecause I genuinely believe it is not. However, I do believe that WordPress\nsuffers from the same kind of ‚Äúironic luck‚Äù that Windows has as an Operating\nSystem; that is, because of its massive popularity, hackers have a lot of\nincentives to try and find security vulnerabilities on WordPress installations,\nand they often succeed at that. In that regard, you might even say that\nWordPress is <em>the</em> Windows of Content Management Systems.</p>\n<p>Alright, let‚Äôs say that you have done enough to secure your site and start\nwriting your posts.</p>\n<p><a href=\"https://giphy.com/gifs/funny-computer-virus-VBwXWPvUdxzPi\">https://giphy.com/gifs/funny-computer-virus-VBwXWPvUdxzPi</a></p>\n<p>Unfortunately, you start realizing that your new awesome WordPress blog is\nactually kind of slow‚Ä¶</p>\n<p><a href=\"https://giphy.com/gifs/angry-computer-frustrated-kkpcRessCvNyo\">https://giphy.com/gifs/angry-computer-frustrated-kkpcRessCvNyo</a></p>\n<p>There are many reasons this could be happening: Maybe your shared hosting\nprovider sucks, or maybe that shiny new $50 theme you bought on ThemeForest\nactually contains a lot of crap code ‚Äî a very common and too well-known\nscenario.</p>\n<p>So, what do you do? Well, if you care about your readers and/or your SEO\nstrategy, then you will probably need to invest some time optimizing your site\nspeed, which in my experience might have varying degrees of success depending on\nyour setup and technical expertise.</p>\n<p>If you were clever enough to get your own Digital Ocean droplet and configure\nyour own Apache instance, then you could definitely implement a cache layer with\nsomething like Varnish, which could help make your blog run a lot faster. If\nnot, you will probably have to leverage one of those ‚Äúmagic‚Äù WordPress cache and\nminification plugins, which in my experience are very unpredictable and\nunreliable, and which might also introduce more security vulnerabilities to your\nsite.</p>\n<p>Well, let‚Äôs assume that despite all of this, one way or another, you manage to\nestablish a fairly successful WordPress blog with a decent reader base. Now the\nmillion dollar question is: ‚ÄúBut will it scale?‚Äù</p>\n<p>What will happen if one of your posts gets picked by Reddit or HackerNews and\nsuddenly you start getting tens of thousands of simultaneous hits? Will your\nshared hosting provider be cool with that? (Spoiler alert: They probably won‚Äôt.)</p>\n<p>If you are managing your own server, did you configure Varnish correctly? What\nif MySQL crashes while you are away on vacations? <em>What if? What if?</em></p>\n<p>Now, I‚Äôm not trying to be pessimistic here. These are very realistic scenarios\nthat I regularly came across in my years of experience as a WordPress developer.\nTurns out that managing and scaling traditional monolithic LAMP stack\napplications is usually a time-consuming task, to say the least.</p>\n<p>You might decide to take the easy route and host your blog on a WordPress\nspecialized hosting service like <a href=\"https://wpengine.com/\">WP Engine</a>, which will\ntake care of all things related to security and scaling for you. But then you\nbetter be prepared to set aside $29 each month, which is what their cheapest\nplan costs.</p>\n<p>I don‚Äôt know about you, but spending $29 each month on a simple blog seems a\nlittle bit excessive to me, especially considering we could be spending next to\nnothing and end up with an infinitely more secure, scalable and faster website.</p>\n<p>Say what?</p>\n<h2>Enter the world of static site generators‚Ä¶</h2>\n<p>If you are a developer, you probably are familiar with Static Site Generators,\nor you have at least come across a site that was built with one, even if you\ndidn‚Äôt realize it. Up until recently, they have been mostly used for\ndocumentation sites of open source projects, because they are very cheap to make\nand because you can host them for free on\n<a href=\"https://pages.github.com/\">GitHub Pages</a>.</p>\n<p>For those very same reasons, developers also often use them to create their own\npersonal blogs and portfolio sites, which only makes sense right? After all, if\nyou are a developer you probably don‚Äôt need a nice GUI to write Markdown posts\nand you are most likely comfortable enough with the terminal and with version\ncontrol in order to generate and push an updated version of your blog to GitHub\nPages manually.</p>\n<p>Because they are just built with static assets, that means there are no\ndatabases to maintain or secure. GitHub is in itself our database, so to speak.\nThat also means that our site is extremely unlikely to go down, regardless of\nthe number of visitors we throw at it.</p>\n<p>All that sounds very nice and dandy, but unfortunately the web is not only made\nout of open source projects documentation sites and developer blogs ‚Äî although\nsometimes I wish it was!</p>\n<p>Even more importantly, the world is not full of tech-savvy developers who know\ntheir way around the terminal and Git. This, I think, is the main reason why\nStatic Sites Generators have only enjoyed a very limited success and adoption.\nThe truth is, managing content in these sites has traditionally required a\ncertain level of technical knowledge which the average user does not possess.</p>\n<p>‚ÄúBut wait, isn‚Äôt that what Content Management Systems are for?‚Äù ‚Äî I hear you\nasking. See, we have come full circle now!</p>\n<p>Why yes, they are!</p>\n<p>In fact, they are excellent at doing just that, managing content. Or, in other\nwords, providing a nice GUI so that both technical and non-technical users can\nmanage content ‚Äî that is, adding it, updating it, deleting it, publishing it as\na draft, etc.</p>\n<p>The problem is that the monolithic and highly coupled architecture of most\nContent Management Systems out there (i.e. WordPress, Drupal, etc) usually means\nthat your CMS will not only manage your content but will also be in charge of\nrendering it to the screen; and this architectural choice, in my opinion, is at\nthe root of many of the headaches I described previously.</p>\n<p>If that‚Äôs the case, wouldn‚Äôt it be nice if we could have a Content Management\nSystem which only took care of managing content but we also had a Static Site\nGenerator which could take all that content and render it into a full-blown\nstatic website?</p>\n<p>That would give us the best of both worlds, right?</p>\n<p>Well, a guy named <a href=\"https://github.com/KyleAMathews\">Kyle Mathews</a> already\nthought of that and created Gatsby.js.</p>\n<h2>Generating static websites with React and webpack</h2>\n<p>A little disclaimer: I absolutely love React, so, when I first learned that\nthere were some emerging Static Site Generators who leveraged only React and\nwebpack, I knew that I had to try at least one of them for the new upcoming blog\nI was planning to build. These projects were <a href=\"https://gatsbyjs.org/\">Gatsby.js</a>\nand <a href=\"https://phenomic.io/\">Phenomic</a>, and both were still quite young back then,\nneither of them having reached the 1.0 release yet.</p>\n<p>Ironically I chose Phenomic, mainly because I liked what the guys from\n<a href=\"http://serverless.com/\">Serverless.com</a> had done with their website at that\ntime ‚Äî built using Phenomic.</p>\n<p>So, I went ahead and built my blog using Phenomic. Overall, I thought it was a\nvery good Static Site Generator. It allowed me to use CSS Modules, PostCSS and\nHot Reloading out of the box, which translated into a very pleasant frontend\ndevelopment experience.</p>\n<p>However, at the end of the day, Phenomic was just another old-school Static Site\nGenerator like <a href=\"https://jekyllrb.com/\">Jekyll</a> or <a href=\"https://gohugo.io/\">Hugo</a>, in\nthe sense that the only data it could handle was Markdown files.</p>\n<p>For a simple developer blog, Phenomic might have been enough, but it was\ndefinitely not something I could expect to use in more ambitious projects that\nwere meant to be updated by non-technical clients. But to be fair, neither were\nall the rest of the Static Site Generators up to that point. Yes, Hugo is\ninsanely fast at generating a lot of pages, and Jekyll has a very mature plugin\necosystem, but they‚Äôre projects that focus on creating sites meant to be updated\nby developers. You just can‚Äôt expect the average user to clone a GitHub\nrepository, add a new Markdown file, add the post metadata in Front Matter\nformat, commit the changes and push it upstream.</p>\n<p>But then Gatsby.js hit the 1.0 release, and everything changed‚Ä¶</p>\n<h2>Meeting Gatsby.js</h2>\n<p>My first contact with the 1.0 release of Gatsby.js was thanks to the Facebook\nteam behind the <a href=\"https://reactjs.org/\">React</a> documentation site. They decided to\nmigrate their legacy Jekyll site to a completely new site built with Gatsby 1.0.\nI, as the good React fanboy that I am, jumped at the first chance I had to\nsubmit a PR to help fix a couple of bugs on the site, and was even given the\nopportunity of setting up the <a href=\"https://reactjs.org/feed.xml\">RSS feed</a>!</p>\n<p>In the process, I learned what the 1.0 release of Gatsby was all about, and I\nwas completely mindblown.</p>\n<p><a href=\"https://giphy.com/gifs/tim-and-eric-mind-blown-EldfH1VJdbrwY\">https://giphy.com/gifs/tim-and-eric-mind-blown-EldfH1VJdbrwY</a></p>\n<p>Not only did it have all the standard goodness of a typical React/webpack static\nsite generator (CSS Modules, PostCSS, Hot Reloading, etc), but more importantly,\nit integrated an incredibly ingenious GraphQL layer which allowed the developer\nto query and fetch data from practically everywhere on the web!</p>\n<p>For us developers, that means that we are no longer restricted to rely on local\nstatic Markdown files to store the data of our static sites ‚Äî although that can\nstill be done very efficiently as well.</p>\n<p>That data can also now be stored on any database or traditional storage device.\nWe can then leverage GraphQL to retrieve it and render it in whatever shape or\nform we wish.</p>\n<p>That also means that our clients can now use a proper CMS to manage all the\ncontent of their sites, and whenever they publish, update or delete an entry,\nthe whole static frontend will be auto-generated from scratch, resulting in a\nnew version that contains the updated information.</p>\n<p>As good as this architecture sounded in my head, I knew that I had to test it\nfirst on a personal project before even thinking on implementing it somewhere\nelse, and so I decided to re-engineer my finished Phenomic blog using Gatsby\ninstead. Since the blog was only composed of React components ‚Äî which by nature\nare extremely portable ‚Äî 90% of the job was already done, so I only had to\nspend a couple of hours refactoring the top level of the application.</p>\n<p>Of course, in order to achieve this setup, there are still some key elements we\nhaven‚Äôt talked about. First of all, we need a CMS that allows both retrieving\nits entries via an HTTP endpoint, as well as setting up webhooks that can be\ntriggered when those entries are created, updated or deleted. Fortunately, most\npopular CMSs nowadays already support those features, either natively or by\ninstalling plugins (i.e.\n<a href=\"https://wordpress.org/plugins/rest-api/\">WordPress REST API</a>).</p>\n<p>Personally, however, I found the idea of maintaining a CMS server and a database\njust for my simple blog not very appealing. Yes, our decoupled architecture\nmeans that if our CMS server or database ever goes down our static frontend\nwon‚Äôt be affected at all, but we still need to pay to have that CMS server up\nand running listening for requests ‚Äî which won‚Äôt be that many ‚Äî and we still\nneed to spend some time securing that MySQL database. Being a ‚ÄúServerless‚Äù\narchitectures enthusiast, I set out to find a more ‚Äúserverless‚Äù and economic\napproach to this issue. Fortunately, the Gatsby.js community had already found\nit in a powerful CMS called Contentful.</p>\n<h2>Contentful to the rescue</h2>\n<p>Contentful is both a Content-as-a-service (CaaS) provider as well as an\nexcellent headless Content Management System ‚Äî which in my opinion is what most\nCMSs should be nowadays.</p>\n<p>Instead of forcing you to render your content following a certain paradigm,\nContentful only provides you with the tools necessary to manage your content ‚Äî\nwhatever that may be ‚Äî and expose it via HTTP endpoints.</p>\n<p>All of that content is stored in their databases, which means that you don‚Äôt\nhave to worry about maintaining or securing any server or database yourself.\nHooray!</p>\n<p><a href=\"https://giphy.com/gifs/hooray-skeletor-aWRWTF27ilPzy\">https://giphy.com/gifs/hooray-skeletor-aWRWTF27ilPzy</a></p>\n<p>Of course, there‚Äôs a little catch. As most ‚Äú(blank)-as-a-service‚Äù providers out\nthere, Contentful is not always free. Although they have a very generous free\ntier which, in my opinion, is more than adequate for most static sites, once you\ngo over that quota they will start charging you, so take that into consideration\nbefore choosing a CMS.</p>\n<p>In my particular case, I knew that Contentful was just exactly what I needed for\nmy blog and so I proceed to set up all my Content Types (Posts, Categories,\nTags, etc) and setup the Gatsby integration using the handy\n<a href=\"https://www.npmjs.com/package/gatsby-source-contentful\">gatsby-source-contentful</a>\nplugin that the Gatsby community created.</p>\n<h2>Hosting with Netlify</h2>\n<p>The only key remaining decision I had to make was where to host my new blog,\nwhich really wasn‚Äôt a very difficult decision to make.\n<a href=\"https://www.netlify.com/\">Netlify</a> is by far the best option out there when it\ncomes to hosting static sites, providing you with an amazing Continuous\nDeployment infrastructure to generate and deploy static sites on demand, which\nincidentally is perfect for this kind of architecture.</p>\n<p>Just like Contentful, Netlify also has a very generous free tier which is more\nthan enough for simple projects like this. If you ever need to scale, though,\nthey also offer several other tiers that can easily meet the demands of bigger\nprojects.</p>\n<h2>Closing notes</h2>\n<p>And so it was that my quest for having a very cheap, secure, fast, scalable,\ncustomizable and easy to maintain blog concluded. It‚Äôs certainly not the most\nexciting or well-looking blog out there, but it‚Äôs everything I wanted it to be\n‚Äî both as a developer and as a blogger.</p>\n<p>Personally I cannot wait to see how far can the limits of technologies like\nGatsby.js can be stretched, and with the advent and spread of new architectural\nparadigms like Serverless, I predict it could be very far.</p>\n<p>But whatever that limit is, I am quite sure that this is a step in the right\ndirection towards making the web a safer, faster and more enjoyable experience\nfor both developers and end users.</p>\n<p><a href=\"https://giphy.com/gifs/black-and-white-end-ending-12xSrwKxHxB3BS\">https://giphy.com/gifs/black-and-white-end-ending-12xSrwKxHxB3BS</a></p>","frontmatter":{"title":"Why I created my blog with Gatsby and Contentful","date":"November 09, 2017","description":null}}},"pageContext":{"slug":"/docs/blog/2017-11-09-why-i-created-my-blog-with-gatsby-and-contentful/","previous":{"fields":{"slug":"/docs/blog/2017-11-08-migrate-from-jekyll-to-gatsby/"},"frontmatter":{"title":"Migrate from Jekyll to Gatsby"}},"next":{"fields":{"slug":"/docs/blog/2017-12-07-taking-gatsby-for-a-spin/"},"frontmatter":{"title":"Taking Gatsby for a spin"}}}}}