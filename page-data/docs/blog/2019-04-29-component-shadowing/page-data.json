{"componentChunkName":"component---src-templates-blog-post-js","path":"/docs/blog/2019-04-29-component-shadowing/","result":{"data":{"site":{"siteMetadata":{"title":"Gatsby Starter Blog"}},"markdownRemark":{"id":"7b9888ac-2009-5398-966b-6442bcf6c46f","excerpt":"Gatsby Themes introduce a concept called Component Shadowing. This feature allows\nusers to override a component in order to customize its rendering. With other…","html":"<p>Gatsby Themes introduce a concept called Component Shadowing. This feature allows\nusers to override a component in order to customize its rendering.</p>\n<p>With other theming approaches it’s impossible to change aspects of a theme if a\nconfiguration option hasn’t been built in. Component Shadowing provides a powerful\nescape hatch to let users make quick, one-off changes that might not make sense to\nsupport in the theme itself.</p>\n<p>For example, imagine you’ve installed <code class=\"language-text\">gatsby-theme-blog</code> and want to customize the\nauthor <code class=\"language-text\">Bio</code> component to add a link to their personal website. Before Component\nShadowing, this new functionality would require configuration at the theme level\nor using a fork of the codebase. These approaches result in a difficult upgrade path\nand a maintenance burden.</p>\n<p>Component Shadowing let’s you replace the theme’s original file,\n<code class=\"language-text\">gatsby-theme-blog/src/components/bio.js</code>, with your own to implement any changes you\nneed.</p>\n<h2>Shadowing example</h2>\n<p>If you’ve installed <code class=\"language-text\">gatsby-theme-blog</code> you’ll notice that it renders a\n<a href=\"https://github.com/gatsbyjs/gatsby/blob/666a9bc3c8d91be8a3118b1128340a06e895735e/themes/gatsby-theme-blog/src/components/bio.js\"><code class=\"language-text\">Bio</code> component</a>\nwhich is used in the <code class=\"language-text\">BlogPost</code> template. If you’d like to change the <code class=\"language-text\">Bio</code> component\nyou can do so with Component Shadowing.</p>\n<h3>Theme File Structure</h3>\n<p><code class=\"language-text\">gatsby-theme-blog</code> has the following file structure (some files have been omitted for\nbrevity):</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">gatsby-theme-blog\n└── src\n    ├── components\n    │   ├── bio.js\n    │   ├── layout.js\n    │   ├── profile-pic.jpg\n    │   └── tokens\n    │       └── index.js\n    └── utils\n        └── typography.js</code></pre></div>\n<h3>Customizing the <code class=\"language-text\">Bio</code> component</h3>\n<p>Component Shadowing uses a naming convention to determine which component will be rendered.\nIn order to override the <code class=\"language-text\">Bio</code> component in <code class=\"language-text\">gatsby-theme-blog</code>, create a file named\n<code class=\"language-text\">user-site/src/gatsby-theme-blog/components/bio.js</code>.</p>\n<p>Any file that lives in the <code class=\"language-text\">src/gatsby-theme-blog</code> directory of the user’s site will be\nused <em>instead</em> of a file with the same name in the theme’s <code class=\"language-text\">src</code> directory:\n<code class=\"language-text\">gatsby-theme-blog/src</code>.</p>\n<p>This means that <code class=\"language-text\">user-site/src/gatsby-theme-blog/components/bio.js</code> will be rendered in place of\n<code class=\"language-text\">gatsby-theme-blog/src/components/bio.js</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx:title=src/gatsby-theme-blog/components/bio.js\"><pre class=\"language-jsx:title=src/gatsby-theme-blog/components/bio.js\"><code class=\"language-jsx:title=src/gatsby-theme-blog/components/bio.js\">import React from &quot;react&quot;\n\nexport default function Bio() {\n  return &lt;h1&gt;My new bio component!&lt;/h1&gt;\n}</code></pre></div>\n<p>With a successful shadow of the <code class=\"language-text\">Bio</code> component you’ll result in the following directory\ntree:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">user-site\n└── src\n    └── gatsby-theme-blog\n        └── components\n            └── bio.js</code></pre></div>\n<p>Leveraging Component Shadowing is a great way to introduce small changes to a theme and\neven layer in new functionality.</p>\n<p><strong>Note</strong>: In the future we’ll publish a technical post that will dive into the internals\nof Component Shadowing.</p>\n<h2>Changing styling</h2>\n<p>Component Shadowing isn’t restricted to React components; you can override any\nJavaScript, Markdown, MDX, or CSS file. For example, <code class=\"language-text\">gatsby-theme-blog</code> has a\n<a href=\"https://github.com/gatsbyjs/gatsby/blob/666a9bc3c8d91be8a3118b1128340a06e895735e/themes/gatsby-theme-blog/src/components/tokens/index.js\">design tokens file</a>\nwhich is used to define font sizing, spacing, and colors. If you want to modify these\nvalues, you can shadow it.</p>\n<p>To do so, create a file named\n<code class=\"language-text\">user-site/src/gatsby-theme-blog/components/tokens/index.js</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"js:title=src/gatsby-theme-blog/components/tokens/index.js\"><pre class=\"language-js:title=src/gatsby-theme-blog/components/tokens/index.js\"><code class=\"language-js:title=src/gatsby-theme-blog/components/tokens/index.js\">export default {\n  fontSizes: [12, 14, 16, 24, 32, 48, 64, 96, 128],\n  space: [0, 4, 8, 16, 32, 64, 128, 256],\n  colors: {\n    blue: `blue`,\n    red: `tomato`,\n  },\n}</code></pre></div>\n<p>You’ll result in the following directory tree:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">user-site\n└── src\n    └── gatsby-theme-blog\n        └── components\n            └── tokens\n                  └──index.js</code></pre></div>\n<p>Now, blue and red will have your custom values and will be reflected in the theme wherever\n<code class=\"language-text\">theme.colors.blue</code> and <code class=\"language-text\">theme.colors.red</code> are used.</p>\n<h3>How much shadowing is too much shadowing?</h3>\n<p>If you’ve found yourself shadowing a large amount of components in a particular theme it\nmight make sense to use a fork instead.</p>\n<h2>Roadmap</h2>\n<p>In the future we’ll be introducing new tooling around Component Shadowing that will\nlist when shadowing occurs, what files are available to shadow, and the ability to eject\nfrom a theme.</p>\n<h2>Conclusion</h2>\n<p>Component Shadowing is a powerful feature for making one-off changes to a theme without the\nneed for complex configuration or maintaining a fork of the code. It’s a stable feature in\nGatsby Themes and is currently being used in production.</p>\n<h2>Further reading</h2>\n<ul>\n<li><a href=\"/gatsby-bloga-2/docs/themes/shadowing/\">Component Shadowing Documentation</a></li>\n<li><a href=\"https://johno.com/latent-component-shadowing\">Latent Component Shadowing</a></li>\n</ul>","frontmatter":{"title":"What is Component Shadowing?","date":"April 29, 2019","description":null}}},"pageContext":{"slug":"/docs/blog/2019-04-29-component-shadowing/","previous":{"fields":{"slug":"/docs/blog/2019-04-26-how-to-build-a-blog-with-wordpress-and-gatsby-part-1/"},"frontmatter":{"title":"How To Build A Blog with WordPress and Gatsby.js - Part 1"}},"next":{"fields":{"slug":"/docs/blog/2019-04-30-how-to-build-a-blog-with-wordpress-and-gatsby-part-2/"},"frontmatter":{"title":"How To Build A Blog with WordPress and Gatsby.js - Part 2"}}}}}