{"componentChunkName":"component---src-templates-blog-post-js","path":"/docs/blog/2018-10-25-using-gatsby-without-graphql/","result":{"data":{"site":{"siteMetadata":{"title":"Gatsby Starter Blog"}},"markdownRemark":{"id":"2cee8d66-f6ec-5b32-9603-4e3bdb38bd81","excerpt":"When creating web experiences, an inevitable question is, “how do I get my data from point A (the source) to point B (the component)?“. This can end up being a…","html":"<p>When creating web experiences, an inevitable question is, “how do I get my data from point A (the source) to point B (the component)?“. This can end up being a deceptively complex question.</p>\n<p>Gatsby’s rich data plugin ecosystem lets you build sites with the data you want — from one or many sources. You can pull data from headless CMSs, SaaS services, APIs, databases, your file system &#x26; more directly into your components.</p>\n<figure>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/gatsby-bloga-2/static/62abf0740582bc7eb400f7f0a72994b8/bcec6/data_sources.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 22.2972972972973%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAuklEQVQY022PSw7CMAxEe/8dd4FDIBZsWaCCqChCQKFpm78z2K4qNkQaxbFmnp2qlILlSP0TzT1TI503iKc1qK8X4x//rCpnQooZMSQQEYjfOWXuJXAJ2+zQbVd471aI9732EnslIwDJLAy5FeimgMvhieHjEFzS6UQFdvBojgMedyBkgGfo5qazaOsOdgzsCTNMlmApMPiIx7XH62YwGa+TxSBbu9FzyPJt4SevPxDQszWqsXcKFJhkvs85Nq+8DZoLAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"An assortment of possible data sources (CMSs, Markdown, APIs, etc)\" title=\"An assortment of possible data sources (CMSs, Markdown, APIs, etc)\" src=\"/gatsby-bloga-2/static/62abf0740582bc7eb400f7f0a72994b8/fcda8/data_sources.png\" srcset=\"/gatsby-bloga-2/static/62abf0740582bc7eb400f7f0a72994b8/12f09/data_sources.png 148w,\n/gatsby-bloga-2/static/62abf0740582bc7eb400f7f0a72994b8/e4a3f/data_sources.png 295w,\n/gatsby-bloga-2/static/62abf0740582bc7eb400f7f0a72994b8/fcda8/data_sources.png 590w,\n/gatsby-bloga-2/static/62abf0740582bc7eb400f7f0a72994b8/efc66/data_sources.png 885w,\n/gatsby-bloga-2/static/62abf0740582bc7eb400f7f0a72994b8/c83ae/data_sources.png 1180w,\n/gatsby-bloga-2/static/62abf0740582bc7eb400f7f0a72994b8/bcec6/data_sources.png 1834w\" sizes=\"(max-width: 590px) 100vw, 590px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span>\n  <figcaption>Your data could come from anywhere</figcaption>\n</figure>\n<p>Most examples in the Gatsby docs and on the web at large focus on leveraging source plugins to manage your data in Gatsby sites. And rightly so! Gatsby’s GraphQL data layer is powerful and extremely effective; it solves the “integration problem” of decoupled CMSs — it’s the glue between presentation layer and wherever your data is sourced from.</p>\n<figure>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/gatsby-bloga-2/static/b083901a6ad1ae2513210237faf2d950/6569d/integration_layer.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 56.75675675675676%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACeElEQVQoz22R7U9ScRTH7z/UXG9KzUSH2YOvcraCTGdahmWrtFQE4YopoCLZzGkzHwIBTbg8JFakYoq6cpPQmiaiabSsufoLvp37QzZfeLfPztP33HPuudxObB9uaxivHSvw2SLw2SPMTyLGSQ7HhzUibksY8e9/wc28WUdB6nMUZg+iKGcIckk/ZKdf4Aohy+zH1awBhpgXc0n/cgZpCDlprkkHkX+iF/OTUXAL05soy7PiToEDfe0hDDxZQFdTEL3GWfSb59FnCsH67COr9RhmYax5B7N6Ej36D6zeVhdAxUU7Ss9b8GluC9xcYANymlp6wYqKfAfuycbwqFhATYmAqkInHha7UFviRnWRi1F5aYTFDQoflGUeikdx/ZyFfc1iMAZueXEbyptOaCs9UFcIUCkE1Je7yPdAdcuFekKtoBfc9hxYgtUEKMudrIe/60XtjTFElnbB4Yhn//ceoutrjL2fcWxFN5i/ufENv+I/ECP7b//PUa3gItu70I16oXf5oXf60eIcR6PDA82wE7ydptvd0NpcaLDSV9gEaCmntowxK/a0UI+BLD/ixdedOLjxpTBSHvBIq2vBydpmZqW8CafqDUgnzjR2IENlZLFIDtVydWbkUj6V9GJPulKPY/c1CCyvgguEV5GtaUPe406cJVFBaze6J6Zh9gXwdPw9BqdCMHnewihMoOblK7ZNl38KQ9MhyDp62cC85k5I1EYEV9bA+Zc+43i1LrERTRLJVLdCqjWxbbJomFTbzpA0tNK2BgbzqSeN9GKcUsUjEP4CLhzbZjfROdxopLuI8HQz8W7a4QN7gJhP3DWhSeqbqFdF26/S//gPaKpno9OtXuoAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"integration layer\" title=\"integration layer\" src=\"/gatsby-bloga-2/static/b083901a6ad1ae2513210237faf2d950/fcda8/integration_layer.png\" srcset=\"/gatsby-bloga-2/static/b083901a6ad1ae2513210237faf2d950/12f09/integration_layer.png 148w,\n/gatsby-bloga-2/static/b083901a6ad1ae2513210237faf2d950/e4a3f/integration_layer.png 295w,\n/gatsby-bloga-2/static/b083901a6ad1ae2513210237faf2d950/fcda8/integration_layer.png 590w,\n/gatsby-bloga-2/static/b083901a6ad1ae2513210237faf2d950/efc66/integration_layer.png 885w,\n/gatsby-bloga-2/static/b083901a6ad1ae2513210237faf2d950/c83ae/integration_layer.png 1180w,\n/gatsby-bloga-2/static/b083901a6ad1ae2513210237faf2d950/6569d/integration_layer.png 1328w\" sizes=\"(max-width: 590px) 100vw, 590px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span>\n  <figcaption>\n    Gatsby&apos;s GraphQL integration layer is the glue between presentation layer\n    and where your data lives\n  </figcaption>\n</figure>\n<blockquote>\n<p><em><a href=\"/gatsby-bloga-2/docs/creating-a-source-plugin/\">Source plugins</a></em> “source” data from remote or local locations into Gatsby nodes, which are then queryable within your Gatsby site using GraphQL. <em><a href=\"/gatsby-bloga-2/docs/node-interface/\">Gatsby nodes</a></em> are the center of Gatsby’s data handling layer.</p>\n</blockquote>\n<p>We’re calling this the <strong>“content mesh”</strong> — the infrastructure layer for a decoupled website. (<a href=\"https://twitter.com/calcsam\">Sam Bhagwat</a> introduced and explored this concept in his recent five-part series, <a href=\"/gatsby-bloga-2/blog/2018-10-04-journey-to-the-content-mesh\">The Journey to a Content Mesh</a>).</p>\n<p><strong>However, you don’t <em>need</em> to use source plugins (or create Gatsby nodes) to pull data into a Gatsby site!</strong> In this post we’ll explore how to use Gatsby without GraphQL (using “unstructured data”), and some of the pros and cons of doing so.</p>\n<blockquote>\n<p><em>Note</em>: For our purposes here, “unstructured data” means data “handled outside of Gatsby’s data layer” i.e. using the data directly, and not transforming the data into Gatsby nodes.</p>\n</blockquote>\n<h2>An example of creating pages using unstructured data from a remote API</h2>\n<p>We’ll take a look at a (very serious) example of how this works. In the example, we’ll:</p>\n<ol>\n<li>Load data from the <a href=\"https://pokeapi.co/\">PokéAPI’s</a> REST endpoints</li>\n<li>Create pages (and nested pages) from this data</li>\n</ol>\n<p>That’s it!</p>\n<h3>The tldr; (in tweet form)</h3>\n<p><a href=\"https://twitter.com/jlengstorf/status/1050855455759593472\">https://twitter.com/jlengstorf/status/1050855455759593472</a></p>\n<h3>Breaking down the example</h3>\n<blockquote>\n<p>Note: This walkthrough assumes you have working knowledge of Gatsby fundamentals. If you’re not (yet!) familiar with Gatsby, you may want to take a look at our <a href=\"/gatsby-bloga-2/docs/\">Quick Start doc</a> first.</p>\n</blockquote>\n<h4>1. Use Gatsby’s <code class=\"language-text\">createPages</code> API.</h4>\n<p><code class=\"language-text\">createPages</code> is a <a href=\"/gatsby-bloga-2/docs/node-apis/#createPages\">Gatsby Node API</a>. It hooks into a certain point in <a href=\"/gatsby-bloga-2/docs/gatsby-lifecycle-apis/#bootstrap-sequence\">Gatsby’s bootstrap sequence</a>.</p>\n<p>By <a href=\"https://github.com/jlengstorf/gatsby-with-unstructured-data/blob/0a91d87b9d4d24a0e6b04b33cc271e054b7467b6/gatsby-node.js#L21\">exporting <code class=\"language-text\">createPages</code></a> from our example Gatsby site’s <code class=\"language-text\">gatsby-node.js</code> file, we’re saying, “at this point in the bootstrapping sequence, run this code”.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript:title=gatsby-node.js\"><pre class=\"language-javascript:title=gatsby-node.js\"><code class=\"language-javascript:title=gatsby-node.js\">// highlight-next-line\nexports.createPages = () =&gt; {\n  // Run this code\n} // highlight-line</code></pre></div>\n<h4>2. <a href=\"https://github.com/jlengstorf/gatsby-with-unstructured-data/blob/0a91d87b9d4d24a0e6b04b33cc271e054b7467b6/gatsby-node.js#L22\">Fetch the data</a> from the PokéAPI.</h4>\n<div class=\"gatsby-highlight\" data-language=\"javascript:title=gatsby-node.js\"><pre class=\"language-javascript:title=gatsby-node.js\"><code class=\"language-javascript:title=gatsby-node.js\">exports.createPages = async () =&gt; {\n  const allPokemon = await getPokemonData([&quot;pikachu&quot;, &quot;charizard&quot;, &quot;squirtle&quot;]) // highlight-line\n}</code></pre></div>\n<p><em>Note: <a href=\"https://github.com/jlengstorf/gatsby-with-unstructured-data/blob/0a91d87b9d4d24a0e6b04b33cc271e054b7467b6/gatsby-node.js#L5\"><code class=\"language-text\">getPokemonData</code></a> is an async function which fetches the relevant desired data for all of our Pokémon.</em></p>\n<h4>3. Grab the <code class=\"language-text\">createPage</code> action</h4>\n<p>When you hook into a Gatsby API (like <code class=\"language-text\">createPages</code> from step one), you are passed a collection of actions. In this example, we’re extracting the <a href=\"https://github.com/jlengstorf/gatsby-with-unstructured-data/blob/0a91d87b9d4d24a0e6b04b33cc271e054b7467b6/gatsby-node.js#L21\"><code class=\"language-text\">createPage</code> action</a> using ES6 object destructuring:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript:title=gatsby-node.js\"><pre class=\"language-javascript:title=gatsby-node.js\"><code class=\"language-javascript:title=gatsby-node.js\">// highlight-next-line\nexports.createPages = async ({ actions: { createPage } }) =&gt; {\n  const allPokemon = await getPokemonData([&quot;pikachu&quot;, &quot;charizard&quot;, &quot;squirtle&quot;])\n}</code></pre></div>\n<h4>4. Create a page that <a href=\"https://github.com/jlengstorf/gatsby-with-unstructured-data/blob/0a91d87b9d4d24a0e6b04b33cc271e054b7467b6/gatsby-node.js#L25\">lists all Pokémon</a>.</h4>\n<div class=\"gatsby-highlight\" data-language=\"javascript:title=gatsby-node.js\"><pre class=\"language-javascript:title=gatsby-node.js\"><code class=\"language-javascript:title=gatsby-node.js\">exports.createPages = async ({ actions: { createPage } }) =&gt; {\n  const allPokemon = await getPokemonData([&quot;pikachu&quot;, &quot;charizard&quot;, &quot;squirtle&quot;])\n\n  // highlight-start\n  // Create a page that lists all Pokémon.\n  createPage({\n    path: `/`,\n    component: require.resolve(&quot;./src/templates/all-pokemon.js&quot;),\n    context: { allPokemon },\n  })\n  // highlight-end\n}</code></pre></div>\n<p>The <a href=\"/gatsby-bloga-2/docs/actions/#createPage\"><code class=\"language-text\">createPage</code> action</a> is passed an object containing:</p>\n<ul>\n<li><code class=\"language-text\">path</code>: This is the relative url you’d like your new page will be available at.</li>\n<li><code class=\"language-text\">component</code>: This is the absolute path to the React component you’ve defined for this page.</li>\n<li><code class=\"language-text\">context</code>: Context data for this page. Available either as props to the component (<code class=\"language-text\">this.props.pageContext</code>) or as <code class=\"language-text\">graphql</code> arguments.</li>\n</ul>\n<p>In our example, we’re accessing the context as <a href=\"https://github.com/jlengstorf/gatsby-with-unstructured-data/blob/0a91d87b9d4d24a0e6b04b33cc271e054b7467b6/src/templates/all-pokemon.js#L4\">props to the component</a>. This allows us to completely circumvent Gatsby’s data layer; it’s just props.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx:title=src/templates/all-pokemon.js\"><pre class=\"language-jsx:title=src/templates/all-pokemon.js\"><code class=\"language-jsx:title=src/templates/all-pokemon.js\">export default function AllPokemon({ pageContext: { allPokemon } }) (// highlight-line\n    {...}\n        {allPokemon.map(pokemon =&gt; ( // highlight-line\n            &lt;li\n                key={pokemon.id}  {/* highlight-line */}\n                style={{\n                    textAlign: &#39;center&#39;,\n                    listStyle: &#39;none&#39;,\n                    display: &#39;inline-block&#39;\n                }}\n            &gt;\n             {/* highlight-start */}\n                &lt;Link to={`/pokemon/${pokemon.name}`}&gt;\n                    &lt;img src={pokemon.sprites.front_default} alt={pokemon.name} /&gt;\n                    &lt;p&gt;{pokemon.name}&lt;/p&gt;\n              {/* highlight-end */}\n                &lt;/Link&gt;\n            &lt;/li&gt;\n        ))}\n    {...}\n);</code></pre></div>\n<h4>5. Create a page <a href=\"https://github.com/jlengstorf/gatsby-with-unstructured-data/blob/0a91d87b9d4d24a0e6b04b33cc271e054b7467b6/gatsby-node.js#L32\">for each Pokémon</a>.</h4>\n<div class=\"gatsby-highlight\" data-language=\"javascript:title=gatsby-node.js\"><pre class=\"language-javascript:title=gatsby-node.js\"><code class=\"language-javascript:title=gatsby-node.js\">exports.createPages = async ({ actions: { createPage } }) =&gt; {\n  const allPokemon = await getPokemonData([&quot;pikachu&quot;, &quot;charizard&quot;, &quot;squirtle&quot;])\n\n  // Create a page that lists all Pokémon.\n  createPage({\n    path: `/`,\n    component: require.resolve(&quot;./src/templates/all-pokemon.js&quot;),\n    context: { allPokemon },\n  })\n\n  // highlight-start\n  // Create a page for each Pokémon.\n  allPokemon.forEach(pokemon =&gt; {\n    createPage({\n      path: `/pokemon/${pokemon.name}/`,\n      component: require.resolve(&quot;./src/templates/pokemon.js&quot;),\n      context: { pokemon },\n    })\n  })\n  // highlight-end\n}</code></pre></div>\n<h4>6. Create a page <a href=\"https://github.com/jlengstorf/gatsby-with-unstructured-data/blob/0a91d87b9d4d24a0e6b04b33cc271e054b7467b6/gatsby-node.js#L40\">for each ability of each Pokémon</a>.</h4>\n<div class=\"gatsby-highlight\" data-language=\"javascript:title=gatsby-node.js\"><pre class=\"language-javascript:title=gatsby-node.js\"><code class=\"language-javascript:title=gatsby-node.js\">exports.createPages = async ({ actions: { createPage } }) =&gt; {\n  const allPokemon = await getPokemonData([&quot;pikachu&quot;, &quot;charizard&quot;, &quot;squirtle&quot;])\n\n  // Create a page that lists all Pokémon.\n  createPage({\n    path: `/`,\n    component: require.resolve(&quot;./src/templates/all-pokemon.js&quot;),\n    context: { allPokemon },\n  })\n\n  // Create a page for each Pokémon.\n  allPokemon.forEach(pokemon =&gt; {\n    createPage({\n      path: `/pokemon/${pokemon.name}/`,\n      component: require.resolve(&quot;./src/templates/pokemon.js&quot;),\n      context: { pokemon },\n    })\n\n    // highlight-start\n    // Create a page for each ability of the current Pokémon.\n    pokemon.abilities.forEach(ability =&gt; {\n      createPage({\n        path: `/pokemon/${pokemon.name}/ability/${ability.name}/`,\n        component: require.resolve(&quot;./src/templates/ability.js&quot;),\n        context: { pokemon, ability },\n      })\n    })\n    // highlight-end\n  })\n}</code></pre></div>\n<p>For each type of page, we are invoking the <code class=\"language-text\">createPage</code> action, and supplying it with our desired path, React component, and data (as <code class=\"language-text\">context</code>).</p>\n<blockquote>\n<p>View the full source code of this example at Jason Lengstorf’s <a href=\"https://github.com/jlengstorf/gatsby-with-unstructured-data\">“gatsby-with-unstructured-data” repo</a>. Also check out the <a href=\"https://github.com/jlengstorf/gatsby-with-unstructured-data/tree/using-gatsby-data-layer\">“using-gatsby-data-layer” branch</a> of that repo, to compare a refactor that uses Gatsby’s data layer in the same example.</p>\n</blockquote>\n<h2>The pros of using unstructured data</h2>\n<ul>\n<li>When prototyping, or when new to Gatsby, this approach may feel more familiar, comfortable, and faster</li>\n<li>There’s no intermediate step: you fetch some data, then build pages with it</li>\n</ul>\n<h2>The tradeoffs of foregoing Gatsby’s data layer</h2>\n<p>Using Gatsby’s data layer provides the following benefits:</p>\n<ul>\n<li>Enables you to declaratively specify what data a page component needs, alongside the page component</li>\n<li>Eliminates frontend data boilerplate — no need to worry about requesting &#x26; waiting for data. Just ask for the data you need with a GraphQL query and it’ll show up when you need it</li>\n<li>Pushes frontend complexity into queries — many data transformations can be done at build-time within your GraphQL queries (e.g. Markdown -> HTML, images -> responsive images, etc)</li>\n<li>It’s the perfect data querying language for the often complex/nested data dependencies of modern applications</li>\n<li>Improves performance by removing data bloat — GraphQL enables you to select only the data you need, not whatever an API returns</li>\n<li>Enables you to take advantage of hot reloading when developing; For example, in this post’s example “Pokémon” site, if you wanted to add a “see other Pokémon” section to the Pokémon detail view, you would need to change your <code class=\"language-text\">gatsby-node.js</code> to pass all Pokémon to the page, and restart the dev server. In contrast, when using queries, you can add a query and it will hot reload.</li>\n</ul>\n<blockquote>\n<p>Learn more about <a href=\"/gatsby-bloga-2/docs/graphql-concepts/\">GraphQL in Gatsby</a>.</p>\n</blockquote>\n<p>Working outside of the data layer also means foregoing the optimizations provided by transformer plugins, like:</p>\n<ul>\n<li><a href=\"https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-image\"><code class=\"language-text\">gatsby-image</code></a> (speedy optimized images),</li>\n<li><a href=\"https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-transformer-sharp\"><code class=\"language-text\">gatsby-transformer-sharp</code></a> (provides queryable fields for processing your images in a variety of ways including resizing, cropping, and creating responsive images),</li>\n<li>… the whole Gatsby ecosystem of official and community-created <a href=\"/gatsby-bloga-2/plugins/?=transformer\">transformer plugins</a>.</li>\n</ul>\n<p>Another difficulty added when working with unstructured data is that your data fetching code becomes increasingly hairy when you source directly from multiple locations.</p>\n<h2>Links potentially of interest</h2>\n<ul>\n<li>GitHub issue: <a href=\"https://github.com/gatsbyjs/gatsby/issues/4994\">“Choosing not to use the GraphQL feature of Gatsby – a bad idea?”</a></li>\n<li>Kyle Mathews’ reasoning for <a href=\"https://github.com/gatsbyjs/gatsby/issues/4994#issuecomment-382110077\">going with GraphQL</a>.</li>\n<li>The issue <a href=\"https://github.com/gatsbyjs/gatsby/issues/420\">introducing 1.0 GraphQL data layer</a>.</li>\n<li>Gatsby docs on <a href=\"/gatsby-bloga-2/docs/using-gatsby-without-graphql\">using Gatsby without GraphQL</a></li>\n</ul>\n<h2>Thanks</h2>\n<ul>\n<li>Thank you to <a href=\"https://github.com/tannerlinsley\">Tanner Linsley</a> of <a href=\"https://github.com/nozzle/react-static\"><code class=\"language-text\">react-static</code></a>, who helped us realize that directly querying APIs and passing them into pages is a great way to build smaller sites, and came up with the term “unstructured data”.</li>\n</ul>","frontmatter":{"title":"Using Gatsby without GraphQL","date":"October 25, 2018","description":null}}},"pageContext":{"slug":"/docs/blog/2018-10-25-using-gatsby-without-graphql/","previous":{"fields":{"slug":"/docs/blog/2018-10-18-vscode-gatsby-development/"},"frontmatter":{"title":"Using VS Code for Supercharged Gatsby.js Development"}},"next":{"fields":{"slug":"/docs/blog/2018-11-01-hacktoberfest-wrapup/"},"frontmatter":{"title":"Gatsby Hacktoberfest Wrap-up"}}}}}