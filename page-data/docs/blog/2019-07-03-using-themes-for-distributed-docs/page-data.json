{"componentChunkName":"component---src-templates-blog-post-js","path":"/docs/blog/2019-07-03-using-themes-for-distributed-docs/","result":{"data":{"site":{"siteMetadata":{"title":"Gatsby Starter Blog"}},"markdownRemark":{"id":"1d4e4e79-a393-5992-9a30-b06df82268f9","excerpt":"Gatsby is a great tool for building static websites, and offers a lot of value when building pages based on a set of Markdown files. This makes it an ideal…","html":"<p>Gatsby is a great tool for building static websites, and offers a lot of value when building pages based on a set of Markdown files. This makes it an ideal partner for building documentation websites, which are typically built statically, and updated by writing Markdown.</p>\n<p>At <a href=\"https://www.apollographql.com\">Apollo</a>, our documentation spans multiple repositories. This is good because it keeps different codebases more tightly coupled with their documentation, issues, and PRs. However, when it comes to building a documentation website, this presents us with a challenge:</p>\n<blockquote>\n<p>How should we bring all of our documentation together into one consistent experience?</p>\n</blockquote>\n<p>Using Gatsby, it would be possible to source files from each repository (using <code class=\"language-text\">gatsby-source-git</code>, for example) and deploy one mega-site. This would satisfy our need to tie all of our repos’ documentation together, but it would also mean that any change in one repo would mean building, testing, and deploying the entire website.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsby-bloga-2/static/3806728354004d2210cbc660034e62ec/00d43/many-to-one.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAACDklEQVQoz42SS0wTURSGu9bEhXHjwqiJGxcmxIWJ8bFw4wZcqHFTogmwM0pMjBhXQmJcKyzUJSgUS4qxLUw3g4+kQBFDRaUFkU4faS3yCG3ppMydz3tnRIgxhpuc3D9nzv3Pf+b8HuQRts2GJRR0bkuGLXPghosV3ML2b7w91HePEDbNj0c52xZhLPmTiw9GOH//PetL81QiXsxY+x9SIRupejYb/HVU1qPUnLqjseeKj5dvkhxpCbDXO0g28Y5q31GE7v3nQ9tcRZTzWDLEehFRyrgKVcFYYpHwRJaVkokezxMeN/hRyDI7qTE/LdWuFTErFT5HMxTTKw5p7VuA6lQn5aknmEkfZrxTElpSoRBc6BjhcPMgQzGD460h6m6GCEnSfY2vOHk7woLxHa0nyr0GHw+v+innDUQ6hDnzHHNugFpKw0y8kIRCEdo0dOgcbAowPGFQdyPIsetBIh8M9jf6ONcWJmWkCHVH6WqN8OyuRrWYRhhBzK89UukAG6kharO9LqEzcnIRbTLHcqmK/qngEC9kCnQPf+T122lyuSxrqyW+jGYopJa3jdxFJf5UjtzvjO+OLJdyWi5l9+U+/HIph6TSA9f89Osz7LrUy4lbYcdGO16KskGLtM0ZaZtxaZv6dp16+U9jc0tOo6ZHUcenqtjaiW0cY8sitRyVsoQbDoG8hb1p7i0z/8/YvwAQCL8FMM4etgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Many sources going through one website\"\n        title=\"Many sources going through one website\"\n        src=\"/gatsby-bloga-2/static/3806728354004d2210cbc660034e62ec/fcda8/many-to-one.png\"\n        srcset=\"/gatsby-bloga-2/static/3806728354004d2210cbc660034e62ec/12f09/many-to-one.png 148w,\n/gatsby-bloga-2/static/3806728354004d2210cbc660034e62ec/e4a3f/many-to-one.png 295w,\n/gatsby-bloga-2/static/3806728354004d2210cbc660034e62ec/fcda8/many-to-one.png 590w,\n/gatsby-bloga-2/static/3806728354004d2210cbc660034e62ec/efc66/many-to-one.png 885w,\n/gatsby-bloga-2/static/3806728354004d2210cbc660034e62ec/00d43/many-to-one.png 1000w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>An alternative approach would be for each repo to deploy a piece of the website based on some shared configuration, allowing each of them to exist independently but remain up-to-date with changes to the website layout and infrastructure. In this world, changes to one repo’s documentation only means rebuilding and deploying its small part of the greater website. The goal of this approach is to reduce or remove the bottlenecks involved in making docs changes.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsby-bloga-2/static/6a5c999f3a8b157297f93537817a68ce/00d43/one-to-one.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAACCklEQVQoz3WSu29SURzH72rU+BfY/8DFyRgdddCkixrnGp0cGgc7qJM6qHFQTKpEjREiVGNRCm2kbYQ6WB6NVKHhIYVcHi3QcssjvORePp57HRpa/A3nJN+c8z3n+5AQo/X79FSNvaNqff4MwfvivFgxtgEcJE1cumpa5tTEF0KxEr1qi2/RTX6kKjx2rHF8fBaXX0artgkni/jiTci6qTrO0JedbG9BV8mhbiwZjJIqfqCTHbpkx+lLUokXMTkj2JYy3HgZQjpv5flMhEqsyNTCGqb5EqReUzMfhsQk8V9t6ukgrdWn/wj1r/oTW7iDeTrqoIafaYVPy1m2G90BvF0vsSMH6DbK++yQVE1j9J6XkSsOFoMydVnB5k0xGypwxxLmyOUp3s4naAjc9T3D3EqeJzNJpLN27r+P0MopBCMFnrljhueSvoze9XJ0bNogbBaqBuHcSoFbgvDgRTuWhQQtgeuELqFkcjYuCN/w4MMqnc2aINwQj8TQ8zAkB4Rk/eV2b4/kjILTv19yutjgs7BCLjeHSBahnJ7wcOCCTYTyezcUX4ZxcxDpnIUXrqgRitUT453AH36MIp0wC0tCKIkSi/40t61hVJGBUZtrojYnbw7WJrxe4dF0lGPXXbgDWbRam1CiLHAFy9d1RsYcvPIkod4hldsRnud3JevFVv9T7GGFN85rfYbNX1WXu8VSx14bAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Each source has its own website\"\n        title=\"Each source has its own website\"\n        src=\"/gatsby-bloga-2/static/6a5c999f3a8b157297f93537817a68ce/fcda8/one-to-one.png\"\n        srcset=\"/gatsby-bloga-2/static/6a5c999f3a8b157297f93537817a68ce/12f09/one-to-one.png 148w,\n/gatsby-bloga-2/static/6a5c999f3a8b157297f93537817a68ce/e4a3f/one-to-one.png 295w,\n/gatsby-bloga-2/static/6a5c999f3a8b157297f93537817a68ce/fcda8/one-to-one.png 590w,\n/gatsby-bloga-2/static/6a5c999f3a8b157297f93537817a68ce/efc66/one-to-one.png 885w,\n/gatsby-bloga-2/static/6a5c999f3a8b157297f93537817a68ce/00d43/one-to-one.png 1000w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Gatsby Themes are a great choice for this task. Themes allow us to build a full-featured Gatsby website—configuring plugins, writing custom components, using GraphQL queries—one time and apply it to multiple data sources. Themes are highly configurable, so each website can have its own defining features, like a page title, description, and more.</p>\n<p>In this blog post, I’m going to talk about some of our favorite parts about using Gatsby Themes to deliver a consistent docs experience.</p>\n<h2>Versioning with <code class=\"language-text\">gatsby-source-git</code></h2>\n<p>We were able to implement versioned docs by taking advantage of the way that theme configuration works. Normally, a website’s <code class=\"language-text\">gatsby-config.js</code> file would export a JavaScript object, but Themes can include a <code class=\"language-text\">gatsby-config.js</code> that exports a function that takes options passed to it by the theme <strong>consumer</strong>, and returns a Gatsby configuration object. You can see how we use this pattern in <a href=\"https://github.com/apollographql/gatsby-theme-apollo/blob/master/packages/gatsby-theme-apollo-docs/gatsby-config.js\">our theme’s <code class=\"language-text\">gatsby-config.js</code></a>.</p>\n<p>The Apollo docs theme accepts a mapping of version numbers to git branches, which it passes along to the <code class=\"language-text\">gatsby-source-git</code> plugin. A theme consumer can specify minimal configuration, and the theme takes care of creating pages and facilitating navigation between versions.</p>\n<h2>Leveraging Gatsby Remark plugins</h2>\n<p>Gatsby’s preeminent Markdown parser, <code class=\"language-text\">gatsby-transformer-remark</code> features a rich ecosystem of useful plugins to do things like code highlighting, adding anchors to headings, and organizing images.</p>\n<p>Since Gatsby Remark plugins allow us to look at the Markdown AST of our pages at build time, we were able to create an internal link checker that scans our Markdown for anchor elements and compares them to known page slugs and heading IDs. This helps us to avoid deploying updates containing broken links, without the need to host the changes and check links with third-party software. You can see how we achieve this in <a href=\"https://github.com/trevorblades/gatsby-remark-check-links\"><code class=\"language-text\">gatsby-remark-check-links</code></a>.</p>\n<h2>Sharing components and more</h2>\n<p>Using <a href=\"/gatsby-bloga-2/docs/mdx/\">MDX</a>, we’re able to write rich documentation by including React components within a Markdown document. Since <code class=\"language-text\">gatsby-plugin-mdx</code> uses Remark under the hood, all of the Remark plugin features that were mentioned in the last section still apply.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsby-bloga-2/static/cf6074f2b27ed70f08aabaf326510ac5/00d43/mdx-components.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAACR0lEQVQoz02SS28SYRiF+Qf+Alvtrre5QKEtCqUU0uhfUrE1pG3cuDZxpQtN3GviXje6qBo1ml5Q2gIzzDAzzHAdeHwZ6uVLTvLly+SZc877xuaXU6TSW6TWt1i9USS5lmc9s828ssr+w0dYlk3lZxXX8xiNxgzDMNJoNGJyxuPxX01OTF3OsZa4RVIvktAKxFWBx7eZm0uwWz6g2+tjGE1c18P3A9ptX+BtevL+P/DPialLG6xrW6TjeTQ1i6JmiOubzFxVub+7F33U8R2CTpfOpYJOBz/oEEZOx5caRYqAaysSM5VHFaCqZAWYZ3ZGi4Cdbo9avYFhNqk3TLmb0b0hrs2mRVMqMUwLu+XQ7w+IKQJcXcmRzRSJJ3IsL91EVzenwAd7UeSLWiMCOK5Ny7EFLMCGJVXYmKYADQvLbk0jT4CammNFXOrxHJq+EUW+PpOgVDqg3w1p2S7HX+q8fnHMuzdVrJqHceZQPTGoHpm4VvCvQ2VRIifzZNOFKO7S4k005dLhzh7hAIyay+HbMx7vf+Tlk29Uvpscfa1z+P6ETx8qVI8tXEe69ftTh3Ftg6R0OImsCFSTyNdmNe6WynheiOMFsj5tfJmw4/jYcreMNkZDdO5iN2Xy7S71ujcFTh0Wpb8MCwtpcZiLgHfulWU9xvSGfQLpMhgMGYxDTk9t6VT2UiKefT7HrslARiFN+YkAsyT0wlSygwmlQErflsgqpZ2yxB1Q/eUR9PsMLzxePf+BduUpt/VnVCpNGVJAy50kEIfS7W90Jk4YD3I9sAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Rendering components in MDX\"\n        title=\"Rendering components in MDX\"\n        src=\"/gatsby-bloga-2/static/cf6074f2b27ed70f08aabaf326510ac5/fcda8/mdx-components.png\"\n        srcset=\"/gatsby-bloga-2/static/cf6074f2b27ed70f08aabaf326510ac5/12f09/mdx-components.png 148w,\n/gatsby-bloga-2/static/cf6074f2b27ed70f08aabaf326510ac5/e4a3f/mdx-components.png 295w,\n/gatsby-bloga-2/static/cf6074f2b27ed70f08aabaf326510ac5/fcda8/mdx-components.png 590w,\n/gatsby-bloga-2/static/cf6074f2b27ed70f08aabaf326510ac5/efc66/mdx-components.png 885w,\n/gatsby-bloga-2/static/cf6074f2b27ed70f08aabaf326510ac5/00d43/mdx-components.png 1000w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><code class=\"language-text\">gatsby-plugin-mdx</code> also allows us to replace Markdown elements with custom React components using the <a href=\"https://gatsby-mdx.netlify.app/api-reference/mdx-provider\"><code class=\"language-text\">components</code> prop on the <code class=\"language-text\">MDXProvider</code> component</a>. We use this feature to enhance our code blocks with copy buttons, filenames, and multiple language options.</p>\n<p><img src=\"/gatsby-bloga-2/2c75e6b2ab295f623913b85b16a187a3/code-blocks.gif\" alt=\"Enhanced code blocks\"></p>\n<p>Lastly, MDX introduces the concept of composing pages from shared chunks of content. For example, we may want to document some commonly used steps to set up an Apollo project. Instead of copying and pasting that content into multiple pages, we can write it once as <a href=\"https://github.com/apollographql/gatsby-theme-apollo/blob/master/packages/gatsby-theme-apollo-docs/shared/project-config-panel.mdx\">an MDX file</a>, import it into other MDX files, and <a href=\"https://www.apollographql.com/docs/platform/schema-validation/#set-up-schema-validation\">render it like a React component</a>. What’s more? Since we’re working with MDX, we can use interactive React elements within the shared content!</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsby-bloga-2/static/267d0d99c7d19d455386a1efc6fc6300/00d43/shared-content.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAACJklEQVQoz22STW/TQBCG80PgAIgm8cfa3l1v7Hw4aRwQFaqgQFVABKWFpqgHCuLrgISEekNCvfPXOLRKYztIUaOiXJpYfRm7UbnU0qMdy7OvZ+adAuhJ0xTj8Rinf08xnU4xmUxwMjnJPmEYxXDdBizThXSqcAnFq9DovXwFhezS+TkwGBwjGsZI4gRHh0cYJX9yweNhBFFpwSQh0/YW+NCtCgyKMy7iCnSiMJ+n2P/6E7sv36Hfe4/ei7fY6u7h2foODn78ogoTcLcOzfKgyYBoQhNBTlk0oBPMCWA5TVi8hcJsluLBShfFWwLMqEHXfRh0Xr9m5OJxNIJyQ5gsgC1CuhTS2clj22nDoZjxAEzUwWT9QvA5VaPEMqrePbiUoORdlIoe3rz+jOEgQa2yCsFCeE4In1B2COF0IEQbkvIdqtqUHpjrU8skuPFom6qrkxgl2suUHGLptkJ/8yMOf0eoqftw7RZ8+q6oKttskUkZTdiM5svqKDMJjamF4OM+DL0ByTvgdjuvsrRUwW7/C+J4BClDOFYDXLSoRYI3wWgElkVzYzRT01u4rLKW51hb7UHXqiQYgpk0ZKOBmzc4tjc/kPMJHJVVoGBwctXJ3FS5oyb3c3cNx790O3f50953ansT3Y0drK+9wpOHW1i58xT73w4QZS6rgEQJST/jtby1kiEJd3H+J9/DlERnZwS1P18wO5tfLnYmllXAaKEzDNrDoi6u5B99Baj3NNghvAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Creating shared content in MDX\"\n        title=\"Creating shared content in MDX\"\n        src=\"/gatsby-bloga-2/static/267d0d99c7d19d455386a1efc6fc6300/fcda8/shared-content.png\"\n        srcset=\"/gatsby-bloga-2/static/267d0d99c7d19d455386a1efc6fc6300/12f09/shared-content.png 148w,\n/gatsby-bloga-2/static/267d0d99c7d19d455386a1efc6fc6300/e4a3f/shared-content.png 295w,\n/gatsby-bloga-2/static/267d0d99c7d19d455386a1efc6fc6300/fcda8/shared-content.png 590w,\n/gatsby-bloga-2/static/267d0d99c7d19d455386a1efc6fc6300/efc66/shared-content.png 885w,\n/gatsby-bloga-2/static/267d0d99c7d19d455386a1efc6fc6300/00d43/shared-content.png 1000w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><img src=\"/gatsby-bloga-2/d511e0bd70b0264c726528720df66132/project-panel.gif\" alt=\"An expandable panel in use\"></p>\n<h2>Having fun doing it</h2>\n<p>The requirements for our docs website infrastructure at Apollo are challenging, but Gatsby Themes, MDX, and a healthy plugin ecosystem give us all the tools we need to deliver a rich, consistent experience across a variety of subjects. This toolset enables us to ship features quickly using familiar technology, and have a great time doing it.</p>\n<p>To learn more about our journey with Themes, check out the webinar <a href=\"https://www.gatsbyjs.com/gatsby-themes/\">“Making Gatsby Even Greater With Themes — Better, Faster, Flexible-er”</a>. If you’re interested in how our themes are implemented, <a href=\"https://github.com/apollographql/gatsby-theme-apollo/tree/master/packages/gatsby-theme-apollo-docs\">view the source on GitHub</a>.</p>","frontmatter":{"title":"Using Themes for Distributed Docs","date":"July 03, 2019","description":null}}},"pageContext":{"slug":"/docs/blog/2019-07-03-using-themes-for-distributed-docs/","previous":{"fields":{"slug":"/docs/blog/2019-07-02-extending-components/"},"frontmatter":{"title":"Extending Shadowed Components"}},"next":{"fields":{"slug":"/docs/blog/2019-07-03-customizing-styles-in-gatsby-themes-with-theme-ui/"},"frontmatter":{"title":"Customizing Styles in Gatsby Themes with Theme UI"}}}}}