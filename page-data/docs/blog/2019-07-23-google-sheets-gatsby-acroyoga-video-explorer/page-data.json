{"componentChunkName":"component---src-templates-blog-post-js","path":"/docs/blog/2019-07-23-google-sheets-gatsby-acroyoga-video-explorer/","result":{"data":{"site":{"siteMetadata":{"title":"Gatsby Starter Blog"}},"markdownRemark":{"id":"4a26ca88-d476-5eb7-8b2d-51bb5ccde2f7","excerpt":"I recently prototyped an Acroyoga-focused side project, called ‘AcroTags’, using Gatsby and the Google Sheets API. The site was as fun to build and populate…","html":"<p>I recently prototyped an <a href=\"https://en.wikipedia.org/wiki/Acroyoga\">Acroyoga</a>-focused side project, called <a href=\"https://acrotagsgatsbyblog.netlify.app\">‘AcroTags’</a>, using Gatsby and the Google Sheets API. The site was as fun to build and populate with data as it is to use for discovering Acroyoga videos. This post will explore why and how I made this site and cover the specific code I used to get Gatsby and Google Sheets to work nicely together. I hope this tutorial and the code samples allow you to quickly prototype your next idea using this very simple and powerful stack.</p>\n<h2>Background on an Acroyoga obsession and the Need for a Video Explorer Site</h2>\n<p>In the Summer of 2018, I became obsessed with the niche sport of Acroyoga. Acroyoga is the practice of doing yoga-inspired acrobatics with other people. Most people start with simple positions like ‘bird’, which you might have tried and called ‘airplane’ as a kid (holding a person up on your feet while laying down). From bird, Acroyoga progresses into hundreds of other positions and sequences of positions. Acroyoga scenes exist all over the world and the common vocabulary of positions allows strangers to meet up and easily ‘jam’ together.</p>\n<p>There are thousands of ‘acroyogis’ on Instagram and YouTube and many of them post and share their latest creations constantly. For intermediate acroyogis like myself, I’m constantly saving, reposting, and curating from this firehose of Acroyoga content. When I’m trying something new at an Acroyoga jam, I’m often pulling my phone out to go through my favorited videos.</p>\n<p>I’ve long found it challenging to find just the right video to work on. Sometimes I’m looking to learn something that is simply fun, novel, or playful. Other days, I might be looking for a challenging sequence right at the edge of my ability. It ends up taking me (and whoever I’m jamming with) too much time of hunting and pecking on our phones while sitting on a blanket in some park. I want a better Acroyoga videos site that makes it simpler to find the right video sooner.</p>\n<p>My requirements for this Acroyoga videos site is that it be simple to add data to, load fast on mobile, and be generally intuitive to use. For this reason, I’m using Gatsby (and of course, React) and the Google Sheets API for this site. This simple stack will allow me to build a fast loading application that consumes data from a Google Sheet.</p>\n<p>As such, this article will show how I built this site. I’ll show only the code samples that are Gatsby and Google Sheets specific but you can see all of the code in this repo: <a href=\"https://github.com/kpennell/acrotagsgatsbyblog\">https://github.com/kpennell/acrotagsgatsbyblog</a>. Finally, if you want to check out the demo app, that can be found here: <a href=\"https://acrotagsgatsbyblog.netlify.app\">https://acrotagsgatsbyblog.netlify.app</a>.</p>\n<h2>Creating a Basic Gatsby Setup with Material-UI</h2>\n<p>Gatsby’s docs have a wide variety of <a href=\"/gatsby-bloga-2/starters/?v=2\">Gatsby starters</a>, each with different features and advantages. I opted to use a starter I built for <a href=\"https://appendto.com/2019/04/build-fast-and-elegant-sites-with-gatsby-netlifycms-and-material-ui/\">another Gatsby tutorial I wrote</a>. My starter has a simple file structure and is setup to use Material-UI (which I’ll use heavily for building this interface). There are a couple ways to use Material-UI in Gatsby but I found the <a href=\"/gatsby-bloga-2/packages/gatsby-plugin-material-ui/\">gatsby-plugin-material-ui</a> plugin route the easiest. Unless you have a very specific use case, save yourself the rabbit hole, install the plugin, and setup the theme within <code class=\"language-text\">gatsby-config.js</code> like so:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      resolve<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-plugin-material-ui</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">        theme<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">          <span class=\"token comment\">// material-ui theme</span></span><span class=\"gatsby-highlight-code-line\">          palette<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">            primary<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">              main<span class=\"token operator\">:</span> <span class=\"token string\">\"#BA3D3B\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// or whatever colors you need</span></span><span class=\"gatsby-highlight-code-line\">            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></span>  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>My Google Sheet Dataset and How to Access it</h2>\n<p>Google sheets are pretty amazing if you think about it. While they might never be able to handle the millions of rows that Excel can, you can share and collaborate on them. There’s tons of add-ons, macros, and scripts you can use to extend the default functionality. Finally, you can consume the data from a Google Sheet using <a href=\"https://developers.google.com/sheets/api/\">a fairly well-documented API</a>. My Acroyoga videos data can be publicly accessed <a href=\"https://docs.google.com/spreadsheets/d/1Qyn6530gveP7wnLHswBH0a_6ndTbWE65hvMWY17313Y/edit?usp=sharing\">here</a>. Here’s what my row headers look like and several of my rows:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsby-bloga-2/static/4487465910a28f4f8a5663bfa11cb68b/3e992/word-image.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20.945945945945947%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAA00lEQVQI1w2O246DIBiEff932qtNd9OqPaCiwmKhxiKg+GOB7t4tFzPJfJlJJltW68BtG2wA62pTXOymTbJt1otUJsTf+P5TSittEjfL6ty+WhviO0vy3lNKuHj0XdvQuX14NtylWqrBIQYN92QMhN5/KBWcp+Y0TZxza23mQwQAIYTW5nIuzq28DbEndJz0hYWSvnKy39gLt6SuUFU3GGPGWNd1WusM3J4eSimdc6fjd4GfBfF1jcU4n3r/1cChgZLsVT+WiH4crp/HK0Ioz/M0/gc73dSUxgmuEAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Google Sheets UI\"\n        title=\"Google Sheets UI\"\n        src=\"/gatsby-bloga-2/static/4487465910a28f4f8a5663bfa11cb68b/fcda8/word-image.png\"\n        srcset=\"/gatsby-bloga-2/static/4487465910a28f4f8a5663bfa11cb68b/12f09/word-image.png 148w,\n/gatsby-bloga-2/static/4487465910a28f4f8a5663bfa11cb68b/e4a3f/word-image.png 295w,\n/gatsby-bloga-2/static/4487465910a28f4f8a5663bfa11cb68b/fcda8/word-image.png 590w,\n/gatsby-bloga-2/static/4487465910a28f4f8a5663bfa11cb68b/efc66/word-image.png 885w,\n/gatsby-bloga-2/static/4487465910a28f4f8a5663bfa11cb68b/c83ae/word-image.png 1180w,\n/gatsby-bloga-2/static/4487465910a28f4f8a5663bfa11cb68b/3e992/word-image.png 1902w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>This is a list of Acroyoga videos from Youtube. I tagged these videos in column I (e.g. beginner, flow). The ‘thumbnail’ column is the Youtube video thumbnail while instructor<em>image are some dummy images I saved in a Google cloud storage bucket. The instructor</em>image column is not <a href=\"https://en.wikipedia.org/wiki/Don%27t_repeat_yourself\">DRY</a> here and I could find a way to store this separately in another sheet. This occasional lack of ‘DRYness’ is one potential downside of using a spreadsheet as a web application database.</p>\n<p>To access this data, I first must ‘publish to the web’ (under the file menu). This makes it available for consuming via API. Next I needed to register for an API key with Google. Finally, I can GET this data using a Google Sheets API method called <a href=\"https://developers.google.com/sheets/api/reference/rest/v4/spreadsheets.values/batchGet\"><code class=\"language-text\">batchGet</code></a>. My API call <a href=\"https://gist.github.com/kpennell/82484a220c0e56f40f98c4bcaec87d9c\">outputs my spreadsheet data as JSON</a>, which I’ll now consume in my Gatsby app.</p>\n<h2>Making Gatsby Pages for Each Google Sheet Row</h2>\n<p>To create Gatsby pages for each row, I’ll need to GET this Google Sheets JSON data within gatsby-node.js (I use Axios for this but fetch is also cool). There a couple of steps I’ll need to take to make these spreadsheet rows available as Gatsby nodes.</p>\n<p>First, I need to format the Google Sheets JSON to be a big array of row objects with the row headers as properties. Google Sheets outputs the data as an array of arrays for each row like so:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"values\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">[</span>\n      <span class=\"token string\">\"id\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"move\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"videoId\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"videoUrl\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"instructor\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"instructor_image\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"thumbnail\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"title\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"tags\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"level\"</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span>\n      <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"back to hands\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"yWIuqyYMobc\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"https://www.youtube.com/watch?v=yWIuqyYMobc\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"Instructor 1\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"https://storage.googleapis.com/randompicskyle/dan-ROJFuWCsfmA-unsplash.jpg\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"https://i.ytimg.com/vi/yWIuqyYMobc/mqdefault.jpg\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"Acro Yoga Basics | Partner Yoga Class | Beginner | Free Yoga\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"beginner, acro\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"beginner\"</span>\n    <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>With a couple of loops (see below), I can convert this array of arrays into an array of objects with properties.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> arrayOfItems <span class=\"token operator\">=</span> response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>valueRanges<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>values\n\n<span class=\"token keyword\">let</span> rows <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> arrayOfItems<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> rowObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> j <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;</span> arrayOfItems<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    rowObject<span class=\"token punctuation\">[</span>arrayOfItems<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> arrayOfItems<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n  rows<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>rowObject<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Here’s my new array of objects with the properties matching the first row.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"move\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"back to hands\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"videoId\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"yWIuqyYMobc\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"videoUrl\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://www.youtube.com/watch?v=yWIuqyYMobc\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"instructor\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Instructor 1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"instructor_image\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://storage.googleapis.com/randompicskyle/dan-ROJFuWCsfmA-unsplash.jpg\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"thumbnail\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://i.ytimg.com/vi/yWIuqyYMobc/mqdefault.jpg\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Acro Yoga Basics | Partner Yoga Class | Beginner | Free Yoga\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"tags\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"beginner, acro\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"level\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"beginner\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"move\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Back plank\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"videoId\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Uh5ADKbrSBU\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"videoUrl\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://www.youtube.com/watch?v=Uh5ADKbrSBU\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"instructor\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Instructor 1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"instructor_image\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://storage.googleapis.com/randompicskyle/dan-ROJFuWCsfmA-unsplash.jpg\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"thumbnail\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://i.ytimg.com/vi/Uh5ADKbrSBU/mqdefault.jpg\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"PARTNER YOGA POSES FOR BEGINNERS\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"tags\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"beginner\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"level\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"beginner\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<p>Next, I’d like for my comma-separated strings of tags (column I) to be arrays of tags (so I can <code class=\"language-text\">.map</code> over them in my React UI). This code allows me to do that:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> itemsArrayWithTagsArray <span class=\"token operator\">=</span> rows<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  item<span class=\"token punctuation\">.</span>tags <span class=\"token operator\">=</span> item<span class=\"token punctuation\">.</span>tags<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">\",\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> item<span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  item <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>item <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> item\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Now, I’m ready to create Gatsby nodes like so:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">itemsArrayWithTagsArray<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> itemNode <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    id<span class=\"token operator\">:</span> <span class=\"token function\">createNodeId</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>i<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    parent<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">__SOURCE__</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    internal<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      type<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">item</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// name of the GraphQL query --> allItem {}</span>\n      contentDigest<span class=\"token operator\">:</span> <span class=\"token function\">createContentDigest</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    children<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    move<span class=\"token operator\">:</span> item<span class=\"token punctuation\">.</span>move<span class=\"token punctuation\">,</span>\n    videoUrl<span class=\"token operator\">:</span> item<span class=\"token punctuation\">.</span>videoUrl<span class=\"token punctuation\">,</span>\n    thumbnail<span class=\"token operator\">:</span> item<span class=\"token punctuation\">.</span>thumbnail<span class=\"token punctuation\">,</span>\n    title<span class=\"token operator\">:</span> item<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">,</span>\n    tags<span class=\"token operator\">:</span> item<span class=\"token punctuation\">.</span>tags<span class=\"token punctuation\">,</span>\n    level<span class=\"token operator\">:</span> item<span class=\"token punctuation\">.</span>level<span class=\"token punctuation\">,</span>\n    instructor<span class=\"token operator\">:</span> item<span class=\"token punctuation\">.</span>instructor<span class=\"token punctuation\">,</span>\n    instructor_image<span class=\"token operator\">:</span> item<span class=\"token punctuation\">.</span>instructor_image<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">createNode</span><span class=\"token punctuation\">(</span>itemNode<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>I then used the Gatsby <code class=\"language-text\">createPage</code> method to create pages for each of these rows (<a href=\"https://github.com/kpennell/acrotagsgatsbyblog/blob/master/gatsby-node.js#L41\">shown here</a>).</p>\n<h2>Making Gatsby Pages for Tags and Instructors</h2>\n<p>Every tag and instructor should have its own page (with a list of matching videos). I’ll now show you how I created these pages within gatsby-node.js.</p>\n<p>If you went through the Gatsby tutorial at some point, you’re probably familiar with the flow of creating nodes then creating pages with those nodes. You can also create pages with what I’d call ‘derivatives of nodes’. Put more simply, you can, for example, loop over a node (like my rows node created in the previous section) and create pages with the result of your loop. This is what I did to create my tag pages, like so:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> tags <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\nitems<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// items is the array of row objects</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>tags<span class=\"token punctuation\">.</span>length <span class=\"token operator\">></span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    tags <span class=\"token operator\">=</span> tags<span class=\"token punctuation\">.</span><span class=\"token function\">concat</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>tags<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\ntags <span class=\"token operator\">=</span> _<span class=\"token punctuation\">.</span><span class=\"token function\">uniq</span><span class=\"token punctuation\">(</span>tags<span class=\"token punctuation\">)</span> <span class=\"token comment\">// lodash method to get only unique tags</span>\n\ntags<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tag</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> tagPath <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/tag/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>_<span class=\"token punctuation\">.</span><span class=\"token function\">kebabCase</span><span class=\"token punctuation\">(</span>tag<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token template-punctuation string\">`</span></span>\n  <span class=\"token comment\">// kebab-case-looks-like-this-thankyou-lo-dash</span>\n  <span class=\"token function\">createPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    path<span class=\"token operator\">:</span> tagPath<span class=\"token punctuation\">,</span>\n    component<span class=\"token operator\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">src/templates/single-tag.js</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    context<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      tag<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>I did exactly the same for my instructors so I’ll skip it here for brevity. As you can see, <code class=\"language-text\">createPage</code> is using single-tag.js and single-instructor.js to create these pages. I’ll next show you, at a high-level, how I created these.</p>\n<h2>Creating the UI with Material-UI</h2>\n<p>As I mentioned at the beginning, I won’t show the code for each and every component here. But I will explain the general process I used to create this UI. I first created the templates, which are single-tag.js, single-item.js, and single-instructor.js. These templates are used in gatsby-node.js when the createPage methods are called.</p>\n<p>My templates are fairly standard Gatsby templates with a React component at the top and a GraphQL query at the bottom. On the single-tag.js and single-instructor.js templates, I use filters in the query to get only the videos that match that tag. Here’s how that query looks:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> tagPageQuery <span class=\"token operator\">=</span> graphql`\n query <span class=\"token function\">TagPage</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">$tag<span class=\"token operator\">:</span> String</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   site <span class=\"token punctuation\">{</span>\n     siteMetadata <span class=\"token punctuation\">{</span>\n       title\n     <span class=\"token punctuation\">}</span>\n   <span class=\"token punctuation\">}</span>\n   <span class=\"token function\">allItem</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">filter<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> tags<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">in</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>$tag<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n     totalCount\n     edges <span class=\"token punctuation\">{</span>\n       node <span class=\"token punctuation\">{</span>\n         id\n         move\n         videoUrl\n  # the rest <span class=\"token keyword\">of</span> the query\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>This query uses $tag from React context (which was created in gatsby-node.js) to do the filtering. If $tag is found in the array of tags (for that row), then it returns that row (which is a video). This is how I can create separate instructor and tag pages that only show those relevant videos (the videos with those specific tags or instructors).</p>\n<p>At the top of my tag pages, I have a title that says “24 videos tagged with [the tag]”. To get the tag for that page, I need to pass pageContext as a prop to this template component. That allows me to access that $tag variable within the template (instead of a GraphQL query). Now I can make the title with the following code:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token punctuation\">{</span>itemsWithTag<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">}</span> <span class=\"token punctuation\">{</span>itemsWithTag<span class=\"token punctuation\">.</span>length <span class=\"token operator\">></span> <span class=\"token number\">1</span> <span class=\"token operator\">?</span> <span class=\"token string\">'videos'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'video'</span><span class=\"token punctuation\">}</span> tagged <span class=\"token keyword\">with</span>\n         <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Chip</span></span> <span class=\"token attr-name\">icon</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Label</span></span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>chipLabel<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">label</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>pageContext<span class=\"token punctuation\">.</span>tag<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>pageContext<span class=\"token punctuation\">.</span>tag<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>tagChips<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/></span></span></code></pre></div>\n<p>The first brackets (above) give me the length (the number of rows or videos that match the tag). Next I use the ternary expression so that if the length is more than 1, I show plural ‘videos’ instead of ‘video’. Next, I’m using a Material-UI chip component to show the value of pageContext.tag (which is the tag). And this is what it achieves in my template:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsby-bloga-2/static/d264011f8f3fdb34e753a935527925e3/8b70b/word-image-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 10.135135135135135%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAAsSAAALEgHS3X78AAAAaklEQVQI1w2NOQoAIQAD9///sRNrC9H1BpHFAyysLETbTRfITPKstTjnOecYI4JSylrbWpNSaq2R3/f13ocQGGMppTkn4O/77r3P3ts5V0pBAQ6yMab3LoQghFBKMQEaPqpa6xgDAJ7OOT//G2TkKqK3ggAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Tagged videos\"\n        title=\"Tagged videos\"\n        src=\"/gatsby-bloga-2/static/d264011f8f3fdb34e753a935527925e3/fcda8/word-image-1.png\"\n        srcset=\"/gatsby-bloga-2/static/d264011f8f3fdb34e753a935527925e3/12f09/word-image-1.png 148w,\n/gatsby-bloga-2/static/d264011f8f3fdb34e753a935527925e3/e4a3f/word-image-1.png 295w,\n/gatsby-bloga-2/static/d264011f8f3fdb34e753a935527925e3/fcda8/word-image-1.png 590w,\n/gatsby-bloga-2/static/d264011f8f3fdb34e753a935527925e3/efc66/word-image-1.png 885w,\n/gatsby-bloga-2/static/d264011f8f3fdb34e753a935527925e3/c83ae/word-image-1.png 1180w,\n/gatsby-bloga-2/static/d264011f8f3fdb34e753a935527925e3/8b70b/word-image-1.png 1266w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>If you’d like to dive into the single-tag or single-instructor templates more, they can be found in <a href=\"https://github.com/kpennell/acrotagsgatsbyblog/tree/master/src/templates\">the templates folder</a>.</p>\n<h2>Linking it all up</h2>\n<p>When I first learned Gatsby, I found the folder structure, node and page creation methods really byzantine and confusing. I struggled to understand why there was no App.js and familiar parent-child component tree. I dug through the files looking for the React-router setup and was at a loss when I didn’t find one. But once I got the hang of the Gatsby way of doing things, I began to love how easy it was to not only create prebuilt fast-loading pages (made up of React components) but also to link these pages together.</p>\n<p>This video explorer site allows users to easily filter videos by clicking/tapping on the tags or instructors. This links them to a new page with only the matching videos. Thanks to Gatsby’s Link component, coding this functionality is very easy. Here is a card for one of the videos (i.e. rows in the Google Sheet).</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsby-bloga-2/static/47caa9e7f6897e4afc3ac0d8ef108c31/8c557/word-image-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 128.3783783783784%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAIAAAA44esqAAAACXBIWXMAAAsSAAALEgHS3X78AAAEfElEQVQ4y5WTa1MaVxjH/R591ff9En3f6aR91XSamWbaTjK2zcQkVlONd0URXbmKiChyEZAIMlHEAl7wEgW5KVeRy7ILeIkryC7srkAP0GbS2LHTZ57ds7vn+e1/n/8523BD0+/OT5OJSC53lc9lU/BJCj5GE8cpOIJdnJ2fppPxEJIIJ2PBDBLH8fz5KZqMhZB4uIDnGwDsOtgW83umOZ0qEUPO75Dz26WclzNjLVJO2wz796nR5smRF7X8bZrXJYZaRcznUHcjCkcbKIr0ee3qWe7Qq8ccxjPRaLuQ1SpgNvMHn3MZzziMp1xGE6e/aaz36Vhf03D3r0OdjUNtj1t++QaORxpomj7y2LVK4Ti3mzc2YDIaXU6n2+0+cB06HC63x+P0Bja3dx0Ou8vtXTVbVs1mPo/d3f4EAco0Rbv3dkUCSDI5Oi3mOfbswUDY7nAmk5mTSAyGETSNRWNIKBD2e3yO3Z1D14FCoRwaeIUmqzC1tWbhskfkUoFsZmJ7a3tnZ//Rt/dWDbojr3/bYtnbsrsOPFaTZXPVYjaubNt25DIFxOpJo/EqvGoy8XmQQsoH8I7Ntr/nWNYvMJ48EPZ3aGZVJqN1fX3TYFheXrasGP+wbW7JqnBvOgVXYeMb9fTUsFLGmVeKlhflRsOscUkjEzBGWn7kDvdxhlkKiVCrntDIhUopRynlioVMNqsthdSUzSsquZSlkrF1mnGdRqid4+o0gjkJa2q4dVELGO7EULuC16VSsGUSpkQ0MCno4kIt6F+wSTsrYapnIb1aYHg9oVMLFtQCjXSE2/2zXi9e1IlkUOuceFAlg+QSplTEmOR1clnNdWV6c0WtmxlcUoyszEHGOeiNnGXWsntfPvrs00+kD38QP/iu4+GXyokew+zQ/FSfeqJLKWifgZozdcOcG3qrlr+2ILS+HjfP81dUHHAxzmr96YvP2fe/Hrn/Vcv395TCfuvCuEnDM6o4RtWYQTp4nkk2UCSZz2FF/IokckU8W8hfEfkrPIdRRLZUzOIERlLXNJkvErlCPksS19dX70BmL88KBF5VBpvs8Mjn8wcCwVAodJxIwCAiJ7EEnEQQ1B8IxuMwmAMF0Vicvrmp1IKiqCpMkmQoFNzf2/P7fcfh8PFxGEGRUDAYiUTQFOoBe9XlOjs7u7i4SKfTNzW4VCoBDPwYFLgHdW53tczv8wUDgWg0CsRPTk6cTmcg4He5XDiOA6ZcLtdlwVCDSbJUrrx9u6PXz2PZbA5kDpyyBYJ4X1rH6vEPmCZJqlJZ4kNTzxvhTCYWjcZisUQigWEY8KJe/eFbbilXKkUMw1MoXSqBFkAjYADGAC+oWtwFl0sl4Ouhz2fb2NhYXwcJA+l4AngArg+9XmDqHXD5CsNQJIkkk8AncGCXl6D1VCqFIghwmCLvgMvleDzu9Xi2bDaL2bxmtQLNTCbj9XoddjsQPz09/ajzD3oGHdJ0oVAA65HP5wmCKBYK9SdELW7+3hj/At+e+8/4GC7fGbdhsrrOFPX+8/5H4DhZLP4J8E//ptrPA24AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Video Card showing Acroyoga\"\n        title=\"Video Card showing Acroyoga\"\n        src=\"/gatsby-bloga-2/static/47caa9e7f6897e4afc3ac0d8ef108c31/fcda8/word-image-2.png\"\n        srcset=\"/gatsby-bloga-2/static/47caa9e7f6897e4afc3ac0d8ef108c31/12f09/word-image-2.png 148w,\n/gatsby-bloga-2/static/47caa9e7f6897e4afc3ac0d8ef108c31/e4a3f/word-image-2.png 295w,\n/gatsby-bloga-2/static/47caa9e7f6897e4afc3ac0d8ef108c31/fcda8/word-image-2.png 590w,\n/gatsby-bloga-2/static/47caa9e7f6897e4afc3ac0d8ef108c31/8c557/word-image-2.png 700w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Linking to the instructor and tags is done with this code:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CardContent</span></span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>cardContent<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span>\n    <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span></span>\n    <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> textDecoration<span class=\"token operator\">:</span> <span class=\"token string\">\"none\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n    <span class=\"token attr-name\">to</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/video/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">kebabCase</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span></span>\n  <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Typography</span></span> <span class=\"token attr-name\">variant</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>h5<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">component</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>h3<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Typography</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span>\n    <span class=\"token attr-name\">to</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/instructor/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">kebabCase</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>instructor<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span></span>\n    <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> textDecoration<span class=\"token operator\">:</span> <span class=\"token string\">\"none\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n  <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Chip</span></span>\n      <span class=\"token attr-name\">avatar</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Avatar</span></span>\n          <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Instructor image<span class=\"token punctuation\">\"</span></span>\n          <span class=\"token attr-name\">src</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>optimized_instructor_image<span class=\"token punctuation\">.</span>childImageSharp<span class=\"token punctuation\">.</span>fluid<span class=\"token punctuation\">.</span>src<span class=\"token punctuation\">}</span></span>\n        <span class=\"token punctuation\">/></span></span>\n      <span class=\"token punctuation\">}</span></span>\n      <span class=\"token attr-name\">label</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>instructor<span class=\"token punctuation\">}</span></span>\n      <span class=\"token attr-name\">variant</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>outlined<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">clickable</span>\n      <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>instructorChips<span class=\"token punctuation\">}</span></span>\n    <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>tagArea<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>tags<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tag</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">to</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/tag/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">kebabCase</span><span class=\"token punctuation\">(</span>tag<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> textDecoration<span class=\"token operator\">:</span> <span class=\"token string\">\"none\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Chip</span></span>\n          <span class=\"token attr-name\">icon</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Label</span></span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>chipLabel<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span></span>\n          <span class=\"token attr-name\">clickable</span>\n          <span class=\"token attr-name\">label</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>tag<span class=\"token punctuation\">}</span></span>\n          <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>tag<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n          <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>tagChips<span class=\"token punctuation\">}</span></span>\n        <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">CardContent</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>That’s it. It’s just <code class=\"language-text\">&lt;Link to=</code> and the relative path, e.g. <code class=\"language-text\">&lt;Link to=&quot;/some-resource/&quot; /&gt;</code>. I don’t need to worry about passing the right props or anything else. I know the page exists (because I built it using createPage in gatsby-node.js). I know the template will have the right data (because I setup the GraphQL query in that template file). I just need to Link to the right URL, and the pages will connect correctly. This creates a fast and intuitive user experience wherein the user can quickly click through the pages to find the right video.</p>\n<h2>Creating a simple video player with React-Player</h2>\n<p>Tag and instructor filtering functionality is great but what the user ultimately wants to do is watch an Acroyoga video. I used <a href=\"https://github.com/CookPete/react-player/issues\">React-player</a> within the single-item.js (video template file) to load the Youtube video player within the app.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ReactPlayer</span></span>\n  <span class=\"token attr-name\">controls</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span></span>\n  <span class=\"token attr-name\">url</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>videoUrl<span class=\"token punctuation\">}</span></span>\n  <span class=\"token attr-name\">playing</span>\n  <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>classes<span class=\"token punctuation\">.</span>player<span class=\"token punctuation\">}</span></span>\n<span class=\"token punctuation\">/></span></span></code></pre></div>\n<p>Be it that most people are going to that video page to watch the video, I set autoplay to true (with the ‘playing’ prop). You can see the entire video player component template <a href=\"https://github.com/kpennell/acrotagsgatsbyblog/blob/master/src/templates/single-item.js\">here</a>.</p>\n<h2>Implementing Gatsby Image with Remote Images</h2>\n<p>After I created the necessary pages and components for my instructor, tag, and video pages, I had a pretty nice site built. A user could play videos and filter based on tag and instructor. I deployed my app to Netlify and tried it out on my phone. But something was missing.</p>\n<p>A big reason why I (and many others) love Gatsby is its speed. After using heavy client-side rendered sites, Gatsby sites feel more modern and fast. It’s nice to be able to explore content almost as fast as you can think. It’s also nice not having to mess with server setup (vs. the simplicity of cloud storage).</p>\n<p>But something about my new Acroyoga video site felt sluggish. I tried it on my older Android phone over 4g and, sure, it was ok, but not great. I next ran my demo site through <a href=\"https://developers.google.com/speed/pagespeed/insights/\">Google’s PageSpeed insights</a> and <a href=\"https://gtmetrix.com/\">GTmetrix</a> tests. My fears were confirmed. The site was good but not great. PageSpeed Insights gave it to me straight, the images were hurting me:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsby-bloga-2/static/08c74c9815a5873ff602f9c3456f0c0a/c211c/word-image-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.513513513513516%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAAA50lEQVQY042Q227EIAxE+f9/zEqhCXGAACEXQrmkU7at+tJqz4M1EjO2MZNKLctSa70b9W/wGmIkpRCZaD7PkxminnOt9TzP1tr7H/x6TyKJMTkbpEw5M++9lBJJIsIKyBtjUJ1zeLK/cFo7Kb3Wxu7hiOjG/BHX/aql5Mb7N6nxIz51zgm2UlKupf2SPf9ZSrlf4OlEo+M4MOkrjAkvhmOMMONGEEzSNPJ+Iuq6jnP+1oDo+34YBiEEKi6CANwhBFwEFde5rosZrUmMMD0eD1Sl1NyAWNd13/dt21CvBrbFTIRxP/T6AAHlzFGqrKSkAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Lighthouse Showing Need for Properly Sized Images\"\n        title=\"Lighthouse Showing Need for Properly Sized Images\"\n        src=\"/gatsby-bloga-2/static/08c74c9815a5873ff602f9c3456f0c0a/fcda8/word-image-3.png\"\n        srcset=\"/gatsby-bloga-2/static/08c74c9815a5873ff602f9c3456f0c0a/12f09/word-image-3.png 148w,\n/gatsby-bloga-2/static/08c74c9815a5873ff602f9c3456f0c0a/e4a3f/word-image-3.png 295w,\n/gatsby-bloga-2/static/08c74c9815a5873ff602f9c3456f0c0a/fcda8/word-image-3.png 590w,\n/gatsby-bloga-2/static/08c74c9815a5873ff602f9c3456f0c0a/efc66/word-image-3.png 885w,\n/gatsby-bloga-2/static/08c74c9815a5873ff602f9c3456f0c0a/c83ae/word-image-3.png 1180w,\n/gatsby-bloga-2/static/08c74c9815a5873ff602f9c3456f0c0a/c211c/word-image-3.png 1502w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>This was such a clear and easy ‘aha!’ moment. I hadn’t optimized my images and was missing out on one of the best parts of Gatsby: <a href=\"/gatsby-bloga-2/packages/gatsby-image/\">gatsby-image</a>. Gatsby image gives Gatsby users a whole bunch of built-in image optimizations. Images will be properly optimized (so you’re not loading image sizes you don’t need to) and the images will load a small blurred version first before loading the complete image. This makes for much faster page loads and a better user experience.</p>\n<p>I dug into my normal gatsby-image workflow but I quickly hit a snag. My previous use of Gatsby-image had been for local images whilst I was now trying to use remote images (cloud storage image links). Thankfully, with just a bit more searching, I found the right plugin to solve this: <a href=\"/gatsby-bloga-2/packages/gatsby-plugin-remote-images/\">gatsby-plugin-remote-images</a>.</p>\n<p>Gatsby-plugin-remote-images fetches image URL links (e.g. <code class=\"language-text\">http://super-image.png</code>) and prepares them in a way that gatsby-image can use them. To make my cards load faster, I’d need to optimize both the video thumbnail as well as the small instructor image. It makes no sense at all to load a 300+ pixel image of an instructor when all you really need are maybe 40 pixels max.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsby-bloga-2/static/6ec55681aa05be1fd24f0e1437dcd059/37523/word-image-4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 127.70270270270272%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAIAAAA44esqAAAACXBIWXMAAAsSAAALEgHS3X78AAAEW0lEQVQ4y2P4BQb/SQf//v1j+P3799evX8vLy8PDw2NjY2NiYqIiI6PAICIiIjo6GiiYlJQUFhoaGREJFAGKA1UFBwdPmjSR4e/fvx8+fFBRUWEAA1FRUQd7e3FxcX09fT09PU0NDaCIs4uLtra2vLyCmqqatJSUuroaUKW3tzfDnz9/Pn36pKeny8jIwMrKAlTk4+MTGBBga2Pj4+3j5uamIC8fExPt7+/v4e7m5+dnZWXt4uLKz88XFBQE1WxgaMbCwsXLK8jFxcvAwMLPL6qsrKmpoSsmJsXFJcjNLcjGxsPJyS8iKKKtri4vLQ20OTQkBKT58+fP9g5+4hIasrKaoiIKxkaOXe2Tmus7+vtmOToHSckZyiubKiiZiMnoBXn691eUBjrZAjWHQDR/+vzZ0TlASkZPXkFfUlJ98uSFRZl5lTm5dvY+MnL6yhrWCirm8irmwmIa8TFJS6dMDLC3AmoODAyEanZ2DZZTMFJUNpGW1Z0/Z2lMZIqno6uyqom8opGqlp2SipmSnp2kS3xOVcuGNSvToyN4eHiTk5OgznZ1D1VWNlNTtxARU+9t7ugoLFGQUwdqllMwUNO2V1QxV9EwUXaLqOidtWnd2vbaKjNT06amJqhmD68oNU07FXUrMWndqd0TJldWmhlayCuZSMkbqWg6KmnYyWrYiimb1TZ2dnV2VuRkMjExAdMFw+8/f75++dJUVJ4XFtFVVNqYld1RUNhcXGhr6ZgaGVOfnlyRlJAXHZUaGpkQGNpYWeni4OBkawP0MyiqIJrXNlV3xad0l1Vf3rltRnf37L5+aWm1wti8fZOXb+qZv7Fr9sq66un5aQtqSntz0vwtjIGafXx9Qcnz+/fvD8+cuHn69pYNh84eOff+4YPzh4/PnLHg1JG7L+7/f3zn39M7/59fvXvv5JFHF88+On/m7L49ba2ta9asZgDmCqD+P3//vX3/9vOXj1++fnn64sW7jx++ff/64uXTV6+fvnz99OPnt6/evHn26tXz169fvnnz4ycoIwHTNQMkV33/9u3y5cvXrl2/f//+zZs3T5w4cfHipQsXLp47d/7G9Zv37t57+vjJlcuXr1y+cv7cuXdv3wKz1I8fP6Caf/78efv27QsXLgAV3Lhx4+jRo1evXn38+PHxY8eBBp09exYoBTT00aNH165dO3XqFFA9MJqgmoHG3Ll9+/y580AVQCf9BAOIj96/fw+UhVjwGwyAXKDNQAYDRBRozP3HT85dvAQ0G57XgQCNjSwC1Qykvnz/sWRy34Kp/S/fvr139+6DBw+ePHkCzG1Aqb9g8A8DQDWDnP33z/kVi8+vW/X558/3794Bnfrx40egNJrlWDQDnQ00++Onz69ev3kMBk+fPv3y5cvr16+fP38O9MhbcPDi1Az08717d4EhfOjQocOHD58+ffrly5f37t27cuXKyZMngb7AtBxFM3J4IBeRWN2MrvkfiYAamoHgG+kAmJ0A+iku9QQlt1cAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Acroyoga Card with Optimized Images\"\n        title=\"Acroyoga Card with Optimized Images\"\n        src=\"/gatsby-bloga-2/static/6ec55681aa05be1fd24f0e1437dcd059/fcda8/word-image-4.png\"\n        srcset=\"/gatsby-bloga-2/static/6ec55681aa05be1fd24f0e1437dcd059/12f09/word-image-4.png 148w,\n/gatsby-bloga-2/static/6ec55681aa05be1fd24f0e1437dcd059/e4a3f/word-image-4.png 295w,\n/gatsby-bloga-2/static/6ec55681aa05be1fd24f0e1437dcd059/fcda8/word-image-4.png 590w,\n/gatsby-bloga-2/static/6ec55681aa05be1fd24f0e1437dcd059/37523/word-image-4.png 720w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Here’s what I had to add to my gatsby-config.js to configure the plugin:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      resolve<span class=\"token operator\">:</span> <span class=\"token string\">\"gatsby-plugin-remote-images\"</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">        nodeType<span class=\"token operator\">:</span> <span class=\"token string\">\"item\"</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">        imagePath<span class=\"token operator\">:</span> <span class=\"token string\">\"thumbnail\"</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">        name<span class=\"token operator\">:</span> <span class=\"token string\">\"optimized_thumbnail\"</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      resolve<span class=\"token operator\">:</span> <span class=\"token string\">\"gatsby-plugin-remote-images\"</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">        nodeType<span class=\"token operator\">:</span> <span class=\"token string\">\"item\"</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">        imagePath<span class=\"token operator\">:</span> <span class=\"token string\">\"instructor_image\"</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">        name<span class=\"token operator\">:</span> <span class=\"token string\">\"optimized_instructor_image\"</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></span>  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>This tells the plugin that it will be the item nodes (the nodes created in <code class=\"language-text\">gatsby-node.js</code> for my videos) and to grab the instructor<em>image and thumbnail paths. Optimized</em>instructor<em>image and optimized</em>thumbnail are the aliases for the new gatsby-image friendly fields.</p>\n<p>Next, I had to change my GraphQL queries to fit the gatsby-image way of getting images (vs. just getting an image url link string like I was doing before). Here’s how <code class=\"language-text\">single-item.js</code> query now looks.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> ItemPageQuery <span class=\"token operator\">=</span> graphql\\`\n query <span class=\"token function\">ItemDetails</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">$itemId<span class=\"token operator\">:</span> String<span class=\"token operator\">!</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token function\">item</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">id<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> eq<span class=\"token operator\">:</span> $itemId <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n     id\n     move\n     videoUrl\n     optimized_thumbnail <span class=\"token punctuation\">{</span>\n       childImageSharp <span class=\"token punctuation\">{</span>\n         <span class=\"token function\">fluid</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">maxWidth<span class=\"token operator\">:</span> <span class=\"token number\">400</span><span class=\"token punctuation\">,</span> maxHeight<span class=\"token operator\">:</span> <span class=\"token number\">250</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n           <span class=\"token operator\">...</span>GatsbyImageSharpFluid\n         <span class=\"token punctuation\">}</span>\n       <span class=\"token punctuation\">}</span>\n     <span class=\"token punctuation\">}</span>\n        title\n        tags\n        level\n        instructor\n        optimized_instructor_image <span class=\"token punctuation\">{</span>\n            childImageSharp <span class=\"token punctuation\">{</span>\n              <span class=\"token function\">fluid</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">maxHeight<span class=\"token operator\">:</span> <span class=\"token number\">50</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token operator\">...</span>GatsbyImageSharpFluid\n            <span class=\"token punctuation\">}</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\\`</code></pre></div>\n<p>You probably recognize those <code class=\"language-text\">fluid</code> and <code class=\"language-text\">childImageSharp</code> fields if you’ve worked with gatsby-image and gatsby-plugin-sharp before. The <code class=\"language-text\">maxHeight: 50</code> part there scales the instructor images down from 267 pixels to 50. I run my site through GTmetrix again and lo and behold, I had shaved my site down from 543KB to 385KB.</p>\n<h3>Before</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsby-bloga-2/static/6d719bfcd368b028bf6be51161aae6ab/53e84/word-image-5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40.54054054054054%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABSklEQVQY011Q2U7DMBDs//8DT4h3hBAIeOEoVIiqKBRBlZSiHE7jo0kcx3Z8JMEpl9p5mNWMdnfWHlEuLqez47uHa88bz70Qk0JaVGtca8JNIUwuDN7Kgmu7i1HX9ydnFweHR5Pp5PHmqqDUTzZ+QhYRfP0Eb2HmJ/h5mS7TTV6rfhcja9ssCedP9+Pz09nk1mhdlQWCWUGwrFhdUc4qUTPdyL3JruvcsGU0h2m8jkOcgbZthZBlWWYpYCitGaO05EI0TSOldKy1VlsehqUyuu3bvrf7i1tlDdedNJ0Tf6bDd+xwNhfNEmSLKE5I2SjjcvAGSSWtMUw0HylZAeQyKaUIIiGly8SEOGf4MClFDN9X6xeYJ6yqIxj4qQdI5LoZq9zxEGWUVgCAIAgQRu5FURzlRc5rPnKbtBlIKb3FTxlsa/7Fb9tQjfnmLx0mwuyzNMdYAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Original Performance Report\"\n        title=\"Original Performance Report\"\n        src=\"/gatsby-bloga-2/static/6d719bfcd368b028bf6be51161aae6ab/fcda8/word-image-5.png\"\n        srcset=\"/gatsby-bloga-2/static/6d719bfcd368b028bf6be51161aae6ab/12f09/word-image-5.png 148w,\n/gatsby-bloga-2/static/6d719bfcd368b028bf6be51161aae6ab/e4a3f/word-image-5.png 295w,\n/gatsby-bloga-2/static/6d719bfcd368b028bf6be51161aae6ab/fcda8/word-image-5.png 590w,\n/gatsby-bloga-2/static/6d719bfcd368b028bf6be51161aae6ab/efc66/word-image-5.png 885w,\n/gatsby-bloga-2/static/6d719bfcd368b028bf6be51161aae6ab/c83ae/word-image-5.png 1180w,\n/gatsby-bloga-2/static/6d719bfcd368b028bf6be51161aae6ab/53e84/word-image-5.png 2074w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3>After</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsby-bloga-2/static/8ffdc51a2378227ee8899a1800bb1ef5/2cefc/word-image-6.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.83783783783784%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABVUlEQVQY02WQWU/CQBDH+/0/hYmJvpkYg+iDRiMESZREoVhQaEuhJ912b7rbw2l58fg97M7xn9mZNS4enk6vb3rj0f3L2HS9/FD5uAiJCqmOmd7zMqTKb12Fparr6ifGZa9/cnY+moyH97dhFLlxbnnxapeY9m5u+4tNZG3CqRN6CeZF1fzGCLa2OXke9K9eB3ecEsFZEoX7OGJ5zghmlEBQclZq1fzDyNLE9xxv/bVz18UBKLIsi/d7tLVJhkiHlG1CCAECpVRRFHC2xbpuYJq/A9WN0lLqSqiqrDtgxbIsu1WPXlu8iYkX4wBBW60OheBCKd3qyspH3ElIRmBmDc9KKSGqO1t3GDPnbbh8XPhzzrgbLN9XIzv4QDkCNwqCz6WVJDFCyDTN6WwK8TRNrYWVopRSasCHYI4xI5wLxikThLY2Py5JGZMSbsE6uIAMtG0NEHwDok+/8FaDslcAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Updated Performance Report\"\n        title=\"Updated Performance Report\"\n        src=\"/gatsby-bloga-2/static/8ffdc51a2378227ee8899a1800bb1ef5/fcda8/word-image-6.png\"\n        srcset=\"/gatsby-bloga-2/static/8ffdc51a2378227ee8899a1800bb1ef5/12f09/word-image-6.png 148w,\n/gatsby-bloga-2/static/8ffdc51a2378227ee8899a1800bb1ef5/e4a3f/word-image-6.png 295w,\n/gatsby-bloga-2/static/8ffdc51a2378227ee8899a1800bb1ef5/fcda8/word-image-6.png 590w,\n/gatsby-bloga-2/static/8ffdc51a2378227ee8899a1800bb1ef5/efc66/word-image-6.png 885w,\n/gatsby-bloga-2/static/8ffdc51a2378227ee8899a1800bb1ef5/c83ae/word-image-6.png 1180w,\n/gatsby-bloga-2/static/8ffdc51a2378227ee8899a1800bb1ef5/2cefc/word-image-6.png 1400w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>This change immediately noticeable on my clunky old Android mobile device. This easy change will make a big difference for future Acroyogis on their phones on a blanket in park somewhere, about to learn something new.</p>\n<h2>Final Thoughts</h2>\n<p>Thanks the power of Gatsby, React, Material-UI, and Google Sheets, I’m now able to have a fast-loading video explorer site with intuitive linking and filtering. I can now go through and tag my Acroyoga videos collection, put it into this Google Sheet, and make it easier for me (and soon, others) to find the right video to try next. Of course, this is not the end of the road. Here’s some ideas of how I could make this site even better:</p>\n<ul>\n<li>Setup a webhook so that Netlify automatically rebuilds the site once I change something in Google Sheets</li>\n<li>Create a way that users can save their favorites in localStorage or possibly, in something like Firebase</li>\n<li>On the individual videos page, link out to similar videos</li>\n<li>Tell more about the instructors on their video pages</li>\n</ul>\n<p>Thanks for reading this tutorial. If you get stuck on something, please feel free to reach out on Twitter @kyleapennell.</p>","frontmatter":{"title":"Using the Google Sheets API With Gatsby for Creating Fast Sites With Simple Data Sources","date":"August 02, 2019","description":null}}},"pageContext":{"slug":"/docs/blog/2019-07-23-google-sheets-gatsby-acroyoga-video-explorer/","previous":{"fields":{"slug":"/docs/blog/2019-08-02-what-is-jsx-pragma/"},"frontmatter":{"title":"What is JSX pragma?"}},"next":{"fields":{"slug":"/docs/blog/2019-08-07-gazette-august/"},"frontmatter":{"title":"Gatsby Gazette: The August Edition"}}}}}